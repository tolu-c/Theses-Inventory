"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[3201],{29889:(I,h,r)=>{r.d(h,{O:()=>D});var l=r(98678),g=r(88876),p=(r(83046),r(58055)),E=r(35103);function f(t,u){1&t&&l.\u0275\u0275elementContainer(0)}let D=(()=>{class t{constructor(s){this.injector=s}ngOnInit(){this.searchFilter=this.getSearchFilter(),this.objectInjector=l.Injector.create({providers:[{provide:p.j9,useFactory:()=>this.filterConfig,deps:[]},{provide:p.y5,useFactory:()=>this.inPlaceSearch,deps:[]},{provide:p.Pe,useFactory:()=>this.refreshFilters,deps:[]}],parent:this.injector})}getSearchFilter(){return(0,g.d)(this.filterConfig.filterType)}}return t.\u0275fac=function(s){return new(s||t)(l.\u0275\u0275directiveInject(l.Injector))},t.\u0275cmp=l.\u0275\u0275defineComponent({type:t,selectors:[["ds-search-facet-filter-wrapper"]],inputs:{filterConfig:"filterConfig",inPlaceSearch:"inPlaceSearch",refreshFilters:"refreshFilters"},decls:1,vars:2,consts:[[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(s,v){1&s&&l.\u0275\u0275template(0,f,1,0,"ng-container",0),2&s&&l.\u0275\u0275property("ngComponentOutlet",v.searchFilter)("ngComponentOutletInjector",v.objectInjector)},dependencies:[E.$G],encapsulation:2}),t})()},88876:(I,h,r)=>{r.d(h,{d:()=>m,z:()=>g});const l=new Map;function g(p){return function(f){f&&l.set(p,f)}}function m(p){return l.get(p)}},58557:(I,h,r)=>{r.d(h,{c:()=>T});var l=r(9237),g=r(77176),m=r(21160),p=r(77007),E=r(48358),f=r(9302),t=(r(83046),r(58055)),u=r(17605),s=r(45608),v=r(57066),F=(r(27496),r(55963)),e=r(98678),B=r(97029),O=r(35103),o=r(29889),C=r(96342),i=r(7027);const a=function(_){return{focus:_}},P=function(_,M){return{closed:_,notab:M}};function x(_,M){if(1&_){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"button",2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.toggle())})("focusin",function(){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.focusBox=!0)})("focusout",function(){e.\u0275\u0275restoreView(n);const c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.focusBox=!1)}),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275pipe(4,"lowercase"),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275pipe(6,"dsBrowserOnly"),e.\u0275\u0275elementStart(7,"h4",3),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"span",4),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",5),e.\u0275\u0275listener("@slide.start",function(c){e.\u0275\u0275restoreView(n);const S=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(S.startSlide(c))})("@slide.done",function(c){e.\u0275\u0275restoreView(n);const S=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(S.finishSlide(c))}),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275element(16,"ds-search-facet-filter-wrapper",6),e.\u0275\u0275elementEnd()()}if(2&_){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("id",n.regionId)("ngClass",e.\u0275\u0275pureFunction1(36,a,n.focusBox)),e.\u0275\u0275attribute("aria-labelledby",n.toggleId),e.\u0275\u0275advance(1),e.\u0275\u0275property("id",n.toggleId),e.\u0275\u0275attribute("aria-controls",n.regionId)("aria-expanded",!1)("aria-label",e.\u0275\u0275pipeBind1(2,16,e.\u0275\u0275pipeBind1(3,18,n.collapsed$)?"search.filters.filter.expand":"search.filters.filter.collapse")+" "+e.\u0275\u0275pipeBind1(4,20,e.\u0275\u0275pipeBind1(5,22,"search.filters.filter."+n.filter.name+".head")))("data-test",e.\u0275\u0275pipeBind1(6,24,"filter-toggle")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,26,"search.filters.filter."+n.filter.name+".head")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pipeBind1(11,28,n.collapsed$)?"fa-plus":"fa-minus")("title",e.\u0275\u0275pipeBind1(12,30,e.\u0275\u0275pipeBind1(13,32,n.collapsed$)?"search.filters.filter.expand":"search.filters.filter.collapse")),e.\u0275\u0275advance(4),e.\u0275\u0275property("@slide",e.\u0275\u0275pipeBind1(15,34,n.collapsed$)?"collapsed":"expanded")("ngClass",e.\u0275\u0275pureFunction2(38,P,n.closed,n.notab)),e.\u0275\u0275advance(2),e.\u0275\u0275property("filterConfig",n.filter)("inPlaceSearch",n.inPlaceSearch)("refreshFilters",n.refreshFilters)}}let T=(()=>{class _{constructor(n,d,c,S){this.filterService=n,this.searchService=d,this.searchConfigService=c,this.sequenceService=S,this.focusBox=!1,this.sequenceId=this.sequenceService.next()}ngOnInit(){this.selectedValues$=this.getSelectedValues(),this.active$=this.isActive(),this.collapsed$=this.isCollapsed(),this.initializeFilter(),this.selectedValues$.pipe((0,g.q)(1)).subscribe(n=>{(0,s.UE)(n)&&this.filterService.expand(this.filter.name)})}toggle(){this.filterService.toggle(this.filter.name)}isCollapsed(){return this.filterService.isCollapsed(this.filter.name)}initializeFilter(){this.filterService.initializeFilter(this.filter)}getSelectedValues(){return this.filterService.getSelectedValuesForFilter(this.filter)}finishSlide(n){"collapsed"===n.fromState&&(this.closed=!1),"collapsed"===n.toState&&(this.notab=!0)}startSlide(n){"collapsed"===n.toState&&(this.closed=!0),"collapsed"===n.fromState&&(this.notab=!1)}get regionId(){return`search-filter-region-${this.sequenceId}`}get toggleId(){return`search-filter-toggle-${this.sequenceId}`}isActive(){return this.selectedValues$.pipe((0,m.w)(n=>(0,s.UE)(n)?(0,l.of)(!0):this.searchConfigService.searchOptions.pipe((0,m.w)(d=>this.searchService.getFacetValuesFor(this.filter,1,d).pipe((0,p.h)(c=>!c.isLoading),(0,E.U)(c=>c.payload?.totalElements>0))))),(0,f.O)(!0))}}return _.\u0275fac=function(n){return new(n||_)(e.\u0275\u0275directiveInject(t.nJ),e.\u0275\u0275directiveInject(v.o),e.\u0275\u0275directiveInject(F.SEARCH_CONFIG_SERVICE),e.\u0275\u0275directiveInject(B.m))},_.\u0275cmp=e.\u0275\u0275defineComponent({type:_,selectors:[["ds-search-filter"]],inputs:{filter:"filter",inPlaceSearch:"inPlaceSearch",refreshFilters:"refreshFilters"},decls:2,vars:3,consts:[["class","facet-filter d-block mb-3 p-3","role","region",3,"id","ngClass",4,"ngIf"],["role","region",1,"facet-filter","d-block","mb-3","p-3",3,"id","ngClass"],[1,"filter-name","d-flex",3,"id","click","focusin","focusout"],[1,"d-inline-block","text-left","mt-auto","mb-auto"],[1,"filter-toggle","flex-grow-1","fas","p-auto",3,"ngClass","title"],[1,"search-filter-wrapper",3,"ngClass"],[3,"filterConfig","inPlaceSearch","refreshFilters"]],template:function(n,d){1&n&&(e.\u0275\u0275template(0,x,17,41,"div",0),e.\u0275\u0275pipe(1,"async")),2&n&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,d.active$))},dependencies:[O.mk,O.O5,o.O,O.Ov,O.i8,C.X$,i.g],styles:["[_nghost-%COMP%]   .facet-filter[_ngcontent-%COMP%]{border:1px solid var(--bs-light);cursor:pointer;line-height:0}[_nghost-%COMP%]   .facet-filter[_ngcontent-%COMP%]   .search-filter-wrapper[_ngcontent-%COMP%]{line-height:var(--bs-line-height-base)}[_nghost-%COMP%]   .facet-filter[_ngcontent-%COMP%]   .search-filter-wrapper.closed[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .facet-filter[_ngcontent-%COMP%]   .search-filter-wrapper.notab[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .facet-filter[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]{line-height:var(--bs-line-height-base);text-align:right;position:relative}[_nghost-%COMP%]   .facet-filter[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{outline:none!important}[_nghost-%COMP%]   .facet-filter[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;border:0;padding:0;background:rgba(0,0,0,0);width:100%}[_nghost-%COMP%]   .facet-filter.focus[_ngcontent-%COMP%]{outline:none;box-shadow:var(--bs-input-btn-focus-box-shadow)}"],data:{animation:[u.JD]}}),_})()},13201:(I,h,r)=>{r.r(h),r.d(h,{SearchFiltersComponent:()=>O});var l=r(48358),g=r(57066),p=(r(27496),r(58055)),E=r(55963),f=r(26176),D=r(45608),t=r(98678),u=r(67522),s=r(35103),v=r(58557),y=r(96342);function F(o,C){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"ds-search-filter",4),t.\u0275\u0275elementEnd()),2&o){const i=C.$implicit,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("filter",i)("inPlaceSearch",a.inPlaceSearch)("refreshFilters",a.refreshFilters)}}function e(o,C){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,F,2,3,"div",3),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&o){const i=t.\u0275\u0275nextContext();let a;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==(a=t.\u0275\u0275pipeBind1(2,2,i.filters))?null:a.payload)("ngForTrackBy",i.trackUpdate)}}const B=function(o){return[o]};let O=(()=>{class o{constructor(i,a,P,x){this.searchService=i,this.filterService=a,this.router=P,this.searchConfigService=x,this.subs=[]}ngOnInit(){this.clearParams=this.searchConfigService.getCurrentFrontendFilters().pipe((0,l.U)(i=>(Object.keys(i).forEach(a=>i[a]=null),i))),this.searchLink=this.getSearchLink()}getSearchLink(){return this.inPlaceSearch?(0,f.T)(this.router):this.searchService.getSearchLink()}trackUpdate(i,a){return a?a.name:void 0}ngOnDestroy(){this.subs.forEach(i=>{(0,D.Uh)(i)&&i.unsubscribe()})}}return o.\u0275fac=function(i){return new(i||o)(t.\u0275\u0275directiveInject(g.o),t.\u0275\u0275directiveInject(p.nJ),t.\u0275\u0275directiveInject(u.F0),t.\u0275\u0275directiveInject(E.SEARCH_CONFIG_SERVICE))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ds-search-filters"]],inputs:{filters:"filters",currentConfiguration:"currentConfiguration",currentScope:"currentScope",inPlaceSearch:"inPlaceSearch",refreshFilters:"refreshFilters"},decls:10,vars:15,consts:[[4,"ngIf"],["queryParamsHandling","merge","role","button",1,"btn","btn-primary",3,"routerLink","queryParams"],[1,"fas","fa-undo"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"filter","inPlaceSearch","refreshFilters"]],template:function(i,a){if(1&i&&(t.\u0275\u0275elementStart(0,"h3"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,e,3,4,"div",0),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275elementStart(5,"a",1),t.\u0275\u0275pipe(6,"async"),t.\u0275\u0275element(7,"i",2),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()),2&i){let P;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,5,"search.filters.head")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==(P=t.\u0275\u0275pipeBind1(4,7,a.filters))?null:P.hasSucceeded),t.\u0275\u0275advance(2),t.\u0275\u0275property("routerLink",t.\u0275\u0275pureFunction1(13,B,a.searchLink))("queryParams",t.\u0275\u0275pipeBind1(6,9,a.clearParams)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,11,"search.filters.reset"),"")}},dependencies:[s.sg,s.O5,u.rH,v.c,s.Ov,y.X$]}),o})()}}]);