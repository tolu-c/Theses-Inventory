(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[3562],{90005:(f,C,n)=>{"use strict";n.d(C,{a:()=>O});var p=n(77007),d=n(48358),i=n(66154),l=n(49887),c=n(16066),e=n(18005),I=n(10572),v=n(96526),P=n(6952),T=n(45608),D=n(55624),S=n(78964),q=n(56190),M=n(14246),R=n(98678);let O=(()=>{class h extends M.t{constructor(a,s,y,u){super("itemrequests",a,s,y,u),this.requestService=a,this.rdbService=s,this.objectCache=y,this.halService=u}getItemRequestEndpoint(){return this.halService.getEndpoint(this.linkPath)}getItemRequestEndpointByToken(a){return this.halService.getEndpoint(this.linkPath).pipe((0,p.h)(s=>(0,T.UE)(s)),(0,d.U)(s=>`${s}/${a}`))}requestACopy(a){const s=this.requestService.generateRequestId();return this.getItemRequestEndpoint().pipe((0,i.s)(u=>(0,T.Uh)(u)),(0,d.U)(u=>{const g=new v.xo(s,u,a);this.requestService.send(g)})).subscribe(),this.rdbService.buildFromRequestUUID(s).pipe((0,I.hC)())}deny(a,s){return this.process(a,s,!1)}grant(a,s,y=!1){return this.process(a,s,!0,y)}process(a,s,y,u=!1){const g=this.requestService.generateRequestId();return this.getItemRequestEndpointByToken(a).pipe((0,l.x)(),(0,d.U)(B=>{const x=Object.create({});let E=new S.WM;return E=E.append("Content-Type","application/json"),x.headers=E,new v.an(g,B,JSON.stringify({acceptRequest:y,responseMessage:s.message,subject:s.subject,suggestOpenAccess:u}),x)}),(0,q.wG)(this.requestService)).subscribe(),this.rdbService.buildFromRequestUUID(g)}}return h.\u0275fac=function(a){return new(a||h)(R.\u0275\u0275inject(P.s),R.\u0275\u0275inject(c.Q),R.\u0275\u0275inject(D.a),R.\u0275\u0275inject(e.q))},h.\u0275prov=R.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},83562:(f,C,n)=>{"use strict";n.r(C),n.d(C,{RequestCopyModule:()=>Q});var p=n(35103),d=n(57999),i=n(67522),l=n(90005),c=n(10572),e=n(98678);let I=(()=>{class t{constructor(o){this.itemRequestDataService=o}resolve(o,m){return this.itemRequestDataService.findById(o.params.token).pipe((0,c.hC)())}}return t.\u0275fac=function(o){return new(o||t)(e.\u0275\u0275inject(l.a))},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();var v=n(48358),P=n(21160),T=n(38123),D=n(65521),S=n(71213);function q(t){return new D.R((0,S.vv)(),t).toString()}const M="deny",O="grant";var U=n(29442),a=n(8842),s=n(15463),y=n(78944),u=n(87657),g=n(41966),B=n(96342);const x=function(t,r){return{url:t,name:r}};function E(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"p",5),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementStart(5,"p"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",6)(9,"a",7),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"a",8),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd()()()),2&t){const o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(2,8,"grant-deny-request-copy.intro1",e.\u0275\u0275pureFunction2(29,x,e.\u0275\u0275pipeBind1(3,11,o.itemUrl$),e.\u0275\u0275pipeBind1(4,13,o.itemName$))),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,15,"grant-deny-request-copy.intro2")),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(11,19,"grant-deny-request-copy.grant")),e.\u0275\u0275property("routerLink",e.\u0275\u0275pipeBind1(10,17,o.grantRoute$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,21,"grant-deny-request-copy.grant")," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(16,25,"grant-deny-request-copy.deny")),e.\u0275\u0275property("routerLink",e.\u0275\u0275pipeBind1(15,23,o.denyRoute$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(18,27,"grant-deny-request-copy.deny")," ")}}function L(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",9)(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p",10)(5,"a",11),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"grant-deny-request-copy.processed")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,4,"grant-deny-request-copy.home-page")))}function $(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,E,19,32,"div",3),e.\u0275\u0275template(2,L,8,6,"div",4),e.\u0275\u0275elementEnd()),2&t){const o=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.payload.decisionDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.payload.decisionDate)}}function A(t,r){1&t&&e.\u0275\u0275element(0,"ds-themed-loading")}function F(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div",1)(1,"h3",2),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,$,3,2,"div",3),e.\u0275\u0275template(5,A,1,0,"ds-themed-loading",3),e.\u0275\u0275elementEnd()),2&t){const o=r.ngVar;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,"grant-deny-request-copy.header")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o&&o.hasSucceeded),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o||(null==o?null:o.isLoading))}}let j=(()=>{class t{constructor(o,m,Y,J,X){this.router=o,this.route=m,this.authService=Y,this.itemDataService=J,this.nameService=X}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,v.U)(o=>o.request),(0,c.hC)(),(0,y.Gh)(this.router,this.authService)),this.itemRD$=this.itemRequestRD$.pipe((0,c.Gp)(),(0,P.w)(o=>this.itemDataService.findById(o.itemId))),this.itemName$=this.itemRD$.pipe((0,c.Gp)(),(0,v.U)(o=>this.nameService.getName(o))),this.itemUrl$=this.itemRD$.pipe((0,c.Gp)(),(0,v.U)(o=>(0,s.Tt)(o))),this.denyRoute$=this.itemRequestRD$.pipe((0,c.Gp)(),(0,v.U)(o=>function R(t){return new D.R(q(t),M).toString()}(o.token))),this.grantRoute$=this.itemRequestRD$.pipe((0,c.Gp)(),(0,v.U)(o=>function h(t){return new D.R(q(t),O).toString()}(o.token)))}}return t.\u0275fac=function(o){return new(o||t)(e.\u0275\u0275directiveInject(i.F0),e.\u0275\u0275directiveInject(i.gz),e.\u0275\u0275directiveInject(T.e8),e.\u0275\u0275directiveInject(U.S),e.\u0275\u0275directiveInject(a._))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["ds-grant-deny-request-copy"]],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],["class","processed-message",4,"ngIf"],[3,"innerHTML"],[1,"btn-group"],[1,"btn","btn-outline-primary",3,"routerLink","title"],[1,"btn","btn-outline-danger",3,"routerLink","title"],[1,"processed-message"],[1,"text-center"],["routerLink","/home",1,"btn","btn-primary"]],template:function(o,m){1&o&&(e.\u0275\u0275template(0,F,6,5,"div",0),e.\u0275\u0275pipe(1,"async")),2&o&&e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(1,1,m.itemRequestRD$))},dependencies:[p.O5,i.rH,u.Z,g.g,p.Ov,B.X$]}),t})();var G=n(4682);function _(t,r){}const W=["*"];let K=(()=>{class t extends G.F{getComponentName(){return"DenyRequestCopyComponent"}importThemedComponent(o){return n(8141)(`./${o}/app/request-copy/deny-request-copy/deny-request-copy.component`)}importUnthemedComponent(){return n.e(8592).then(n.bind(n,30160))}}return t.\u0275fac=function(){let r;return function(m){return(r||(r=e.\u0275\u0275getInheritedFactory(t)))(m||t)}}(),t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["ds-themed-deny-request-copy"]],features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:W,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(o,m){1&o&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,_,0,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(2,"div",null,1),e.\u0275\u0275projection(4),e.\u0275\u0275elementEnd())},encapsulation:2}),t})();function N(t,r){}const H=["*"];let z=(()=>{class t extends G.F{getComponentName(){return"GrantRequestCopyComponent"}importThemedComponent(o){return n(17156)(`./${o}/app/request-copy/grant-request-copy/grant-request-copy.component`)}importUnthemedComponent(){return n.e(8592).then(n.bind(n,31536))}}return t.\u0275fac=function(){let r;return function(m){return(r||(r=e.\u0275\u0275getInheritedFactory(t)))(m||t)}}(),t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["ds-themed-grant-request-copy"]],features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:H,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(o,m){1&o&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,N,0,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(2,"div",null,1),e.\u0275\u0275projection(4),e.\u0275\u0275elementEnd())},encapsulation:2}),t})(),V=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({providers:[I,j],imports:[i.Bz.forChild([{path:":token",resolve:{request:I},children:[{path:"",component:j},{path:M,component:K},{path:O,component:z}]}])]}),t})(),Q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.ez,d.m,V]}),t})()},8141:(f,C,n)=>{var p={"./custom/app/request-copy/deny-request-copy/deny-request-copy.component":[82829,8592,2829]};function d(i){if(!n.o(p,i))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e});var l=p[i],c=l[0];return Promise.all(l.slice(1).map(n.e)).then(()=>n(c))}d.keys=()=>Object.keys(p),d.id=8141,f.exports=d},17156:(f,C,n)=>{var p={"./custom/app/request-copy/grant-request-copy/grant-request-copy.component":[42728,8592,2728]};function d(i){if(!n.o(p,i))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e});var l=p[i],c=l[0];return Promise.all(l.slice(1).map(n.e)).then(()=>n(c))}d.keys=()=>Object.keys(p),d.id=17156,f.exports=d}}]);