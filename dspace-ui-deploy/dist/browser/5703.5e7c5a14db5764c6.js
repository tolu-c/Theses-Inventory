"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[5703,3682],{75703:(P,u,o)=>{o.r(u),o.d(u,{EditCommunityPageModule:()=>st});var s=o(35103),y=o(57999),f=o(24806),v=o(25584),t=o(98678),m=o(67522),d=o(96342);const c=function(n){return{active:n}},C=function(n){return[n]};function h(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"li",13)(1,"a",14),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&n){const e=a.$implicit,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(5,c,e===i.currentPage))("routerLink",t.\u0275\u0275pureFunction1(7,C,"./"+e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,3,i.type+".edit.tabs."+e+".head")," ")}}function B(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"a",15),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275element(2,"i",16),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();let i;t.\u0275\u0275property("routerLink",e.getPageUrl(null==(i=t.\u0275\u0275pipeBind1(1,2,e.dsoRD$))?null:i.payload)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,e.type+".edit.return")," ")}}let D=(()=>{class n extends f.x{constructor(e,i){super(e,i),this.router=e,this.route=i,this.type="community"}getPageUrl(e){return(0,v.Ke)(e.id)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(m.F0),t.\u0275\u0275directiveInject(m.gz))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ds-edit-community"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:21,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom"],[1,"btn","btn-danger",3,"routerLink"],[1,"fas","fa-trash"],[1,"pt-2"],[1,"nav","nav-tabs","justify-content-start","mb-2"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-pane","active"],[1,"mb-4"],[1,"col-12","text-right"],["class","btn btn-outline-secondary",3,"routerLink",4,"ngIf"],[1,"nav-item"],[1,"nav-link",3,"ngClass","routerLink"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-arrow-left"]],template:function(e,i){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div")(8,"a",4),t.\u0275\u0275pipe(9,"async"),t.\u0275\u0275element(10,"i",5),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(13,"div",6)(14,"ul",7),t.\u0275\u0275template(15,h,4,9,"li",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",9)(17,"div",10),t.\u0275\u0275element(18,"router-outlet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",11),t.\u0275\u0275template(20,B,5,6,"a",12),t.\u0275\u0275elementEnd()()()()()()),2&e){let r;t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,5,i.type+".edit.head")),t.\u0275\u0275advance(3),t.\u0275\u0275property("routerLink",("community"===i.type?"/communities/":"/collections/")+(null==(r=t.\u0275\u0275pipeBind1(9,7,i.dsoRD$))?null:r.payload.uuid)+"/delete"),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(12,9,i.type+".edit.delete"),""),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngForOf",i.pages),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",!i.hideReturnButton)}},dependencies:[s.mk,s.sg,s.O5,m.lC,m.rH,s.Ov,d.X$],encapsulation:2}),n})();var F=o(80180),T=o(66234),O=o(50401),j=o(65384),x=o(4147);let A=(()=>{class n extends F.Z{constructor(e,i,r,p,M){super(e,i,r,p,M),this.communityDataService=e,this.router=i,this.route=r,this.notificationsService=p,this.translate=M,this.frontendURL="/communities/",this.type=T.S.type}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(O.w),t.\u0275\u0275directiveInject(m.F0),t.\u0275\u0275directiveInject(m.gz),t.\u0275\u0275directiveInject(j.T),t.\u0275\u0275directiveInject(d.sK))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ds-community-metadata"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"dso","submitForm","back","finish"]],template:function(e,i){if(1&e&&(t.\u0275\u0275elementStart(0,"ds-community-form",0),t.\u0275\u0275listener("submitForm",function(p){return i.onSubmit(p)})("back",function(){return i.navigateToHomePage()})("finish",function(){return i.navigateToHomePage()}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275elementEnd()),2&e){let r;t.\u0275\u0275property("dso",null==(r=t.\u0275\u0275pipeBind1(1,1,i.dsoRD$))?null:r.payload)}},dependencies:[x.C,s.Ov],encapsulation:2}),n})();var I=o(76215),l=o(48358),g=o(10572),$=o(31258);function U(n,a){if(1&n&&(t.\u0275\u0275element(0,"ds-comcol-role",1),t.\u0275\u0275pipe(1,"async")),2&n){const e=a.$implicit,i=t.\u0275\u0275nextContext();t.\u0275\u0275property("dso",t.\u0275\u0275pipeBind1(1,2,i.community$))("comcolRole",e)}}let z=(()=>{class n{constructor(e){this.route=e}ngOnInit(){this.dsoRD$=this.route.parent.data.pipe((0,I.P)(),(0,l.U)(e=>e.dso)),this.community$=this.dsoRD$.pipe((0,g.xw)(),(0,g.xe)()),this.comcolRoles$=this.community$.pipe((0,l.U)(e=>[{name:"community-admin",href:e._links.adminGroup.href}]))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(m.gz))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ds-community-roles"]],decls:2,vars:3,consts:[[3,"dso","comcolRole",4,"ngFor","ngForOf"],[3,"dso","comcolRole"]],template:function(e,i){1&e&&(t.\u0275\u0275template(0,U,2,4,"ds-comcol-role",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(1,1,i.comcolRoles$))},dependencies:[s.sg,$.b,s.Ov],encapsulation:2}),n})();var S=o(77176),L=o(77007),K=o(8842),N=o(45608),H=o(62583);const W=function(n){return{community:n}};let G=(()=>{class n{constructor(e,i){this.route=e,this.dsoNameService=i}ngOnInit(){this.dsoRD$=this.route.parent.data.pipe((0,S.q)(1),(0,l.U)(e=>e.dso)),this.communityName$=this.dsoRD$.pipe((0,L.h)(e=>(0,N.Uh)(e)),(0,l.U)(e=>this.dsoNameService.getName(e.payload)))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(m.gz),t.\u0275\u0275directiveInject(K._))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ds-community-curate"]],decls:7,vars:11,consts:[[1,"container"],[3,"dsoHandle"]],template:function(e,i){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"h3"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"ds-curation-form",1),t.\u0275\u0275pipe(6,"async"),t.\u0275\u0275elementEnd()),2&e){let r;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(3,2,"community.curate.header",t.\u0275\u0275pureFunction1(9,W,t.\u0275\u0275pipeBind1(4,5,i.communityName$)))),t.\u0275\u0275advance(3),t.\u0275\u0275property("dsoHandle",null==(r=t.\u0275\u0275pipeBind1(6,7,i.dsoRD$))?null:r.payload.handle)}},dependencies:[H._,s.Ov,d.X$],encapsulation:2}),n})();var b=o(76457),J=o(53482);let X=(()=>{class n{constructor(e){this.route=e}ngOnInit(){this.dsoRD$=this.route.parent.parent.data.pipe((0,I.P)(),(0,l.U)(e=>e.dso))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(m.gz))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ds-community-authorizations"]],decls:3,vars:4,consts:[[1,"container"],[3,"resourceType","resourceUUID"]],template:function(e,i){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"ds-resource-policies",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&e){let r;t.\u0275\u0275advance(1),t.\u0275\u0275property("resourceType","community")("resourceUUID",null==(r=t.\u0275\u0275pipeBind1(2,2,i.dsoRD$))||null==r.payload?null:r.payload.id)}},dependencies:[J.F,s.Ov],encapsulation:2}),n})();var E=o(84535),Z=o(60740),R=o(37161),Q=o(50269),V=o(24049),Y=o(35794),w=o(38123),_=o(9237),k=o(80978);let q=(()=>{class n extends V.C{constructor(e,i,r){super(e,i,r),this.authorizationService=e,this.router=i,this.authService=r}getFeatureID(e,i){return(0,_.of)(k.i.IsCommunityAdmin)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(Y._),t.\u0275\u0275inject(m.F0),t.\u0275\u0275inject(w.e8))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var tt=o(62467);function et(n,a){1&n&&t.\u0275\u0275element(0,"ds-access-control-form-container",1),2&n&&t.\u0275\u0275property("itemRD",a.ngIf)("showLimitToSpecificBitstreams",!1)}let nt=(()=>{class n{constructor(e){this.route=e}ngOnInit(){this.itemRD$=this.route.parent.parent.data.pipe((0,l.U)(e=>e.dso)).pipe((0,g.xw)())}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(m.gz))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ds-community-access-control"]],decls:2,vars:3,consts:[["titleMessage","community-access-control-title",3,"itemRD","showLimitToSpecificBitstreams",4,"ngIf"],["titleMessage","community-access-control-title",3,"itemRD","showLimitToSpecificBitstreams"]],template:function(e,i){1&e&&(t.\u0275\u0275template(0,et,1,2,"ds-access-control-form-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,i.itemRD$))},dependencies:[s.O5,tt.x,s.Ov]}),n})(),ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({providers:[R.b,E.a],imports:[m.Bz.forChild([{path:"",resolve:{breadcrumb:b.t},data:{breadcrumbKey:"community.edit"},component:D,canActivate:[q],children:[{path:"",redirectTo:"metadata",pathMatch:"full"},{path:"metadata",component:A,data:{title:"community.edit.tabs.metadata.title",hideReturnButton:!0,showBreadcrumbs:!0}},{path:"roles",component:z,data:{title:"community.edit.tabs.roles.title",showBreadcrumbs:!0}},{path:"curate",component:G,data:{title:"community.edit.tabs.curate.title",showBreadcrumbs:!0}},{path:"access-control",component:nt,data:{title:"collection.edit.tabs.access-control.title",showBreadcrumbs:!0}},{path:"authorizations",data:{showBreadcrumbs:!0},children:[{path:"create",resolve:{resourcePolicyTarget:E.a},component:Z.v,data:{title:"resource-policies.create.page.title"}},{path:"edit",resolve:{resourcePolicy:R.b},component:Q.x,data:{title:"resource-policies.edit.page.title"}},{path:"",component:X,data:{title:"community.edit.tabs.authorizations.title",showBreadcrumbs:!0,hideReturnButton:!0}}]}]}])]}),n})();var it=o(9856),at=o(54131),rt=o(47413),mt=o(93682);let st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[s.ez,y.m,ot,it.T,rt.H,at.q,mt.J]}),n})()},93682:(P,u,o)=>{o.d(u,{J:()=>d});var s=o(35103),y=o(96342),f=o(1599),v=o(57999),t=o(65706),m=o(98678);let d=(()=>{class c{}return c.\u0275fac=function(h){return new(h||c)},c.\u0275mod=m.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=m.\u0275\u0275defineInjector({imports:[s.ez,v.m,y.aw,f.S,t.M]}),c})()}}]);