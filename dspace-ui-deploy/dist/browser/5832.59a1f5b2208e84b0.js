"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[5832],{25832:(qt,B,o)=>{o.r(B),o.d(B,{ProcessPageModule:()=>Gt});var O=o(57999),v=o(67522),x=o(97920),d=o(10572),f=o(48358),g=o(21160),K=o(30658),C=o(46533),e=o(98678),p=o(35103),b=o(41966),Y=(o(23229),o(35399)),D=o(75286),w=o(65384),Z=o(6952),$=o(74423),m=o(45608),u=o(96342);function Q(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function W(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementStart(3,"ul"),e.\u0275\u0275template(4,Q,2,1,"li",13),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"process.new.parameter.required.missing")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.missingParameters)}}const q=function(){return["/processes"]};let M=(()=>{class n{constructor(t,r,a,s,c){this.scriptService=t,this.notificationsService=r,this.translationService=a,this.requestService=s,this.router=c,this.selectedScript=void 0,this.process=void 0,this.parameters=[],this.files=[],this.missingParameters=[]}ngOnInit(){this.process=new Y.A}submitForm(t){if((0,m.xb)(this.parameters)&&(this.parameters=[]),!this.validateForm(t)||this.isRequiredMissing())return;const r=this.parameters.map(a=>({name:a.name,value:this.checkValue(a)}));this.scriptService.invoke(this.selectedScript.id,r,this.files).pipe((0,d.hC)()).subscribe(a=>{if(a.hasSucceeded){const s=this.translationService.get("process.new.notification.success.title"),c=this.translationService.get("process.new.notification.success.content");this.notificationsService.success(s,c),this.sendBack()}else{const s=this.translationService.get("process.new.notification.error.title"),c=this.translationService.get("process.new.notification.error.content");this.notificationsService.error(s,c)}})}checkValue(t){return"object"==typeof t.value?(this.files=[...this.files,t.value],t.value.name):t.value}validateForm(t){let r=!0;return Object.keys(t.controls).forEach(a=>{t.controls[a].invalid&&(t.controls[a].markAsDirty(),r=!1)}),r}isRequiredMissing(){this.missingParameters=[];const t=this.parameters.map(a=>a.name),r=this.selectedScript.parameters.filter(a=>a.mandatory);for(const a of r)t.includes(a.name)||this.missingParameters.push(a.name);return this.missingParameters.length>0}sendBack(){this.requestService.removeByHrefSubstring("/processes"),this.router.navigateByUrl((0,$.dz)())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(D.UY),e.\u0275\u0275directiveInject(w.T),e.\u0275\u0275directiveInject(u.sK),e.\u0275\u0275directiveInject(Z.s),e.\u0275\u0275directiveInject(v.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-form"]],inputs:{selectedScript:"selectedScript",process:"process",parameters:"parameters",headerKey:"headerKey"},decls:19,vars:16,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"col-12","col-md-6"],[3,"ngSubmit"],["form","ngForm"],[3,"script","select"],[3,"initialParams","script","updateParameters"],[1,"btn","btn-light","float-left",3,"routerLink"],["type","submit",1,"btn","btn-light","float-right"],[3,"script"],["class","mt-3 alert alert-danger validation-error",4,"ngIf"],[1,"mt-3","alert","alert-danger","validation-error"],[4,"ngFor","ngForOf"]],template:function(t,r){if(1&t){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3)(6,"form",4,5),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(a);const c=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(r.submitForm(c))}),e.\u0275\u0275elementStart(8,"ds-scripts-select",6),e.\u0275\u0275listener("select",function(c){return r.selectedScript=c,r.parameters=void 0}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"ds-process-parameters",7),e.\u0275\u0275listener("updateParameters",function(c){return r.parameters=c}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",8),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",9),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",3),e.\u0275\u0275element(17,"ds-script-help",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(18,W,5,4,"div",11),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,9,r.headerKey)," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialParams",r.parameters)("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(15,q)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,11,"process.new.cancel")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,13,"process.new.submit")),e.\u0275\u0275advance(3),e.\u0275\u0275property("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.missingParameters.length>0))}}),n})();function _(n){return n}function ee(n,i){if(1&n&&(e.\u0275\u0275element(0,"ds-process-form",2),e.\u0275\u0275pipe(1,"async")),2&n){const t=i.ngVar,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selectedScript",e.\u0275\u0275pipeBind1(1,2,r.script$))("parameters",t.parameters)}}function te(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ee,2,4,"ds-process-form",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(2,1,t.fromExisting$))}}function ne(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-process-form",3),e.\u0275\u0275elementContainerEnd())}let re=(()=>{class n{constructor(t,r,a){this.route=t,this.processService=r,this.linkService=a}ngOnInit(){const t=this.route.snapshot.queryParams.id;t&&(this.fromExisting$=this.processService.findById(t).pipe((0,d.Gp)()),this.script$=this.fromExisting$.pipe((0,f.U)(r=>this.linkService.resolveLink(r,(0,C.l)("script"))),(0,g.w)(r=>r.script),(0,d.Gp)()))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(v.gz),e.\u0275\u0275directiveInject(x.n),e.\u0275\u0275directiveInject(K.M))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-new-process"]],decls:4,vars:6,consts:[[4,"ngIf"],["headerKey","process.new.header",3,"selectedScript","parameters",4,"ngVar"],["headerKey","process.new.header",3,"selectedScript","parameters"],["headerKey","process.new.header"]],template:function(t,r){1&t&&(e.\u0275\u0275template(0,te,3,3,"ng-container",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,ne,2,0,"ng-container",0),e.\u0275\u0275pipe(3,"async")),2&t&&(e.\u0275\u0275property("ngIf",r.fromExisting$&&e.\u0275\u0275pipeBind1(1,2,r.fromExisting$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!r.fromExisting$||!e.\u0275\u0275pipeBind1(3,4,r.fromExisting$)))},dependencies:[p.O5,b.g,M,p.Ov]}),n})();var ie=o(45180),ae=o(75195),se=o(81323),oe=o(6144),y=o(35841),le=o(14111),pe=o(32543),de=o(27193),T=o(27303),j=o(77007);let me=(()=>{class n{constructor(t,r,a){this.processDataService=t,this.notificationsService=r,this.translateService=a,this.processesToDelete=[],this.isProcessingBehaviorSubject=new y.X(!1)}toggleDelete(t){this.isToBeDeleted(t)?this.processesToDelete.splice(this.processesToDelete.indexOf(t),1):this.processesToDelete.push(t)}isToBeDeleted(t){return this.processesToDelete.includes(t)}clearAllProcesses(){this.processesToDelete.splice(0)}getAmountOfSelectedProcesses(){return this.processesToDelete.length}isProcessing$(){return this.isProcessingBehaviorSubject}hasSelected(){return(0,m.UE)(this.processesToDelete)}deleteSelectedProcesses(){this.isProcessingBehaviorSubject.next(!0),(0,le.D)([...this.processesToDelete]).pipe((0,de.b)(t=>this.processDataService.delete(t).pipe((0,d.hC)(),(0,T.b)(r=>{r.hasFailed?this.notificationsService.error(this.translateService.get("process.bulk.delete.error.head"),this.translateService.get("process.bulk.delete.error.body",{processId:t})):this.toggleDelete(t)}))),(0,j.h)(t=>t.hasSucceeded),function ce(n){return(0,pe.u)((i,t,r)=>!n||n(t,r)?i+1:i,0)}()).subscribe(t=>{this.notificationsService.success(this.translateService.get("process.bulk.delete.success",{count:t})),this.isProcessingBehaviorSubject.next(!1)})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(x.n),e.\u0275\u0275inject(w.T),e.\u0275\u0275inject(u.sK))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var R=o(8842),k=o(65706),ue=o(78530);function ve(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.processBulkDeleteService.clearAllProcesses())}),e.\u0275\u0275element(1,"i",11),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,1,"process.overview.delete.clear")," "))}const I=function(n){return{count:n}};function fe(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(),s=e.\u0275\u0275reference(15);return e.\u0275\u0275resetView(a.openDeleteModal(s))}),e.\u0275\u0275element(1,"i",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(3,1,"process.overview.delete",e.\u0275\u0275pureFunction1(4,I,t.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}function ge(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}const N=function(n){return["/processes/",n]};function _e(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"a",19),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"td")(5,"a",19),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,ge,2,1,"td",20),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td")(18,"button",21),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.processBulkDeleteService.toggleDelete(s.processId))}),e.\u0275\u0275element(19,"i",22),e.\u0275\u0275elementEnd()()()}if(2&n){const t=i.$implicit,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("table-danger",r.processBulkDeleteService.isToBeDeleted(t.processId)),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(20,N,t.processId)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.processId),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(22,N,t.processId)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.scriptName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(8,10,r.getEpersonName(t.userId))),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(11,12,t.startTime,r.dateFormat,"UTC")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(14,16,t.endTime,r.dateFormat,"UTC")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.processStatus)}}function he(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-pagination",14),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",15)(4,"table",16)(5,"thead")(6,"tr")(7,"th",17),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",17),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",17),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th",17),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",17),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th",17),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"th",17),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"tbody"),e.\u0275\u0275template(29,_e,20,24,"tr",18),e.\u0275\u0275pipe(30,"async"),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext();let r,a,s;e.\u0275\u0275property("paginationOptions",t.pageConfig)("pageInfoState",null==(r=e.\u0275\u0275pipeBind1(1,13,t.processesRD$))?null:r.payload)("collectionSize",null==(a=e.\u0275\u0275pipeBind1(2,15,t.processesRD$))||null==a.payload?null:a.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,17,"process.overview.table.id")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,19,"process.overview.table.name")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,21,"process.overview.table.user")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,23,"process.overview.table.start")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,25,"process.overview.table.finish")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,27,"process.overview.table.status")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(27,29,"process.overview.table.actions")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",null==(s=e.\u0275\u0275pipeBind1(30,31,t.processesRD$))||null==s.payload?null:s.payload.page)}}function xe(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,"process.overview.delete.body",e.\u0275\u0275pureFunction1(4,I,t.processBulkDeleteService.getAmountOfSelectedProcesses())))}}function Se(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275element(1,"span",33),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(4,1,"process.overview.delete.processing",e.\u0275\u0275pureFunction1(4,I,t.processBulkDeleteService.getAmountOfSelectedProcesses())),"")}}function Ce(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",23)(2,"div")(3,"h4"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.closeModal())}),e.\u0275\u0275elementStart(7,"span",25),e.\u0275\u0275text(8,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",26),e.\u0275\u0275template(10,xe,3,6,"div",27),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275template(12,Se,5,6,"div",28),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementStart(14,"div",29)(15,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.closeModal())}),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.deleteSelected())}),e.\u0275\u0275pipe(20,"async"),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,7,"process.overview.delete.header")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(11,9,t.processBulkDeleteService.isProcessing$())),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(13,11,t.processBulkDeleteService.isProcessing$())),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(16,13,t.processBulkDeleteService.isProcessing$())),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,15,"process.detail.delete.cancel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(20,17,t.processBulkDeleteService.isProcessing$())),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(22,19,"process.overview.delete",e.\u0275\u0275pureFunction1(22,I,t.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}let ye=(()=>{class n{constructor(t,r,a,s,c,h){this.processService=t,this.paginationService=r,this.ePersonService=a,this.modalService=s,this.processBulkDeleteService=c,this.dsoNameService=h,this.config=Object.assign(new oe.R,{elementsPerPage:20}),this.pageConfig=Object.assign(new ie.r,{id:"po",pageSize:20}),this.dateFormat="yyyy-MM-dd HH:mm:ss",this.processesToDelete=[]}ngOnInit(){this.setProcesses(),this.processBulkDeleteService.clearAllProcesses()}setProcesses(){this.processesRD$=this.paginationService.getFindListOptions(this.pageConfig.id,this.config).pipe((0,g.w)(t=>this.processService.findAll(t,!0,!1)))}getEpersonName(t){return this.ePersonService.findById(t).pipe((0,d.Gp)(),(0,f.U)(r=>this.dsoNameService.getName(r)))}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id),(0,m.Uh)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe()}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close()}deleteSelected(){this.processBulkDeleteService.deleteSelectedProcesses(),(0,m.Uh)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe(),this.isProcessingSub=this.processBulkDeleteService.isProcessing$().subscribe(t=>{t||(this.closeModal(),this.setProcesses())})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x.n),e.\u0275\u0275directiveInject(se.N),e.\u0275\u0275directiveInject(ae.k),e.\u0275\u0275directiveInject(k.FF),e.\u0275\u0275directiveInject(me),e.\u0275\u0275directiveInject(R._))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-overview"]],decls:16,vars:11,consts:[[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],[1,"d-flex","justify-content-end"],["class","btn btn-primary mr-2",3,"click",4,"ngIf"],["class","btn btn-danger mr-2",3,"click",4,"ngIf"],["routerLink","/processes/new",1,"btn","btn-success"],[1,"fas","fa-plus","pr-2"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["deleteModal",""],[1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-undo","pr-2"],[1,"btn","btn-danger","mr-2",3,"click"],[1,"fas","fa-trash","pr-2"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],[3,"table-danger",4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngVar"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"mt-4"],[1,"btn","btn-primary","mr-2",3,"disabled","click"],["id","delete-confirm",1,"btn","btn-danger",3,"disabled","click"],[1,"alert","alert-info"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","spinner-button"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",3),e.\u0275\u0275template(6,ve,4,3,"button",4),e.\u0275\u0275template(7,fe,4,6,"button",5),e.\u0275\u0275elementStart(8,"button",6),e.\u0275\u0275element(9,"i",7),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,he,31,33,"ds-pagination",8),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Ce,23,24,"ng-template",null,9,e.\u0275\u0275templateRefExtractor)),2&t){let a;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,5,"process.overview.title")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.processBulkDeleteService.hasSelected()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.processBulkDeleteService.hasSelected()),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,7,"process.overview.new")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==(a=e.\u0275\u0275pipeBind1(13,9,r.processesRD$))||null==a.payload?null:a.payload.totalElements)>0)}},dependencies:[p.sg,p.O5,v.rH,ue.Q,b.g,p.Ov,p.uU,u.X$],encapsulation:2}),n})(),L=(()=>{class n{constructor(t){this.processService=t}resolve(t,r){return this.processService.findById(t.params.id,!1,!0,(0,C.l)("script")).pipe((0,d.hC)())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(x.n))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var U=o(32210),Ie=o(2703),F=o(77176),A=o(90410),Pe=o(38123),Ve=o(39034),be=o(61750),we=o(65521),Te=o(60987),P=o(58371),z=o(78944),Fe=o(78964),Ee=o(87657),Be=o(50122);const Oe=["*"];let De=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-detail-field"]],inputs:{title:"title"},ngContentSelectors:Oe,decls:4,vars:3,consts:[[1,"mt-4"]],template:function(t,r){1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"h4",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(3)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,r.title)))},dependencies:[u.X$],encapsulation:2}),n})();var $e=o(69721);function Me(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"i",21),e.\u0275\u0275elementEnd()),2&n){const t=i.ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Refreshing in ",t,"s ")}}function je(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",null==t?null:t.name," ",null==t?null:t.value,"")}}function Re(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",22),e.\u0275\u0275template(1,je,2,2,"div",23),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("title","process.detail.arguments"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==t?null:t.parameters)}}function ke(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-themed-file-download-link",28)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"dsFileSize"),e.\u0275\u0275elementEnd()()),2&n){const t=i.$implicit,r=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("bitstream",t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(r.getFileName(t)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("(",e.\u0275\u0275pipeBind1(5,3,null==t?null:t.sizeBytes),")")}}function Ne(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",25)(1,"div",26),e.\u0275\u0275template(2,ke,6,5,"ds-themed-file-download-link",27),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275property("title","process.detail.output-files"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t)}}function Le(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Ne,3,2,"ds-process-detail-field",24),e.\u0275\u0275elementEnd()),2&n){const t=i.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&(null==t?null:t.length)>0)}}function Ue(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",29),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.start-time")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(4,4,t.startTime,r.dateFormat,"UTC"))}}function Ae(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",30),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.end-time")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(4,4,t.endTime,r.dateFormat,"UTC"))}}function ze(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",31),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.status")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.processStatus)}}function He(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showProcessOutputLogs())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.detail.logs.button")," "))}function Je(n,i){1&n&&(e.\u0275\u0275element(0,"ds-themed-loading",38),e.\u0275\u0275pipe(1,"translate")),2&n&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"process.detail.logs.loading"))}function Ge(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"pre",39),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.outputLogs$))}}function Xe(n,i){1&n&&(e.\u0275\u0275elementStart(0,"p",40),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.detail.logs.none")," "))}function Ke(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",32),e.\u0275\u0275template(1,He,3,3,"button",33),e.\u0275\u0275template(2,Je,2,3,"ds-themed-loading",34),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,Ge,3,3,"pre",35),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,Xe,3,3,"p",36),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext();let a,s;e.\u0275\u0275property("title","process.detail.output"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.showOutputLogs&&null!=(null==t||null==t._links||null==t._links.output?null:t._links.output.href)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,5,r.retrievingOutputLogs$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.showOutputLogs&&(null==(a=e.\u0275\u0275pipeBind1(5,7,r.outputLogs$))?null:a.length)>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(7,9,r.retrievingOutputLogs$)&&r.showOutputLogs&&!e.\u0275\u0275pipeBind1(8,11,r.outputLogs$)||0==(null==(s=e.\u0275\u0275pipeBind1(9,13,r.outputLogs$))?null:s.length)||!t._links.output)}}function Ye(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(3);return e.\u0275\u0275resetView(a.openDeleteModal(s))}),e.\u0275\u0275element(1,"i",42),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,1,"process.detail.delete.button")," "))}const Ze=function(n,i){return{id:n,name:i}},Qe=function(n){return{id:n}};function We(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2",5),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Me,3,1,"div",6),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"ds-process-detail-field",7)(9,"div"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,Re,2,2,"ds-process-detail-field",8),e.\u0275\u0275template(12,Le,2,1,"div",9),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275template(14,Ue,5,8,"ds-process-detail-field",10),e.\u0275\u0275template(15,Ae,5,8,"ds-process-detail-field",11),e.\u0275\u0275template(16,ze,4,4,"ds-process-detail-field",12),e.\u0275\u0275template(17,Ke,10,15,"ds-process-detail-field",13),e.\u0275\u0275elementStart(18,"ds-process-detail-field",14)(19,"button",15),e.\u0275\u0275element(20,"i",16),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,Ye,4,3,"button",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",18)(25,"a",19),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd()()()),2&n){const t=i.ngIf,r=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(5,16,"process.detail.title",e.\u0275\u0275pureFunction2(27,Ze,null==t?null:t.processId,null==t?null:t.scriptName))," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,19,r.refreshCounter$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("title","process.detail.script"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.scriptName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t?null:t.parameters)&&(null==t||null==t.parameters?null:t.parameters.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",null==(a=e.\u0275\u0275pipeBind1(13,21,r.filesRD$))||null==a.payload?null:a.payload.page),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t&&t.startTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&t.endTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&t.processStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.isProcessFinished(t)),e.\u0275\u0275advance(1),e.\u0275\u0275property("title","process.detail.actions"),e.\u0275\u0275advance(1),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction1(30,Qe,null==t?null:t.processId)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(22,23,"process.detail.create")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.isProcessFinished(t)),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink","/processes"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(27,25,"process.detail.back"))}}function qe(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",44)(2,"div")(3,"h4"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.closeModal())}),e.\u0275\u0275elementStart(7,"span",46),e.\u0275\u0275text(8,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",47)(10,"div"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",48)(14,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.closeModal())}),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",50),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).ngIf,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.deleteProcess(s))}),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd()()()()}2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,"process.detail.delete.header")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,6,"process.detail.delete.body")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,8,"process.detail.delete.cancel")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(19,10,"process.detail.delete.confirm")," "))}function et(n,i){if(1&n&&(e.\u0275\u0275template(0,qe,20,12,"div",43),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext();let r;e.\u0275\u0275property("ngIf",null==(r=e.\u0275\u0275pipeBind1(1,1,t.processRD$))?null:r.payload)}}let tt=(()=>{class n{constructor(t,r,a,s,c,h,Xt,Kt,Yt,Zt,Qt,Wt){this.platformId=t,this.route=r,this.router=a,this.processService=s,this.bitstreamDataService=c,this.nameService=h,this.zone=Xt,this.authService=Kt,this.http=Yt,this.modalService=Zt,this.notificationsService=Qt,this.translateService=Wt,this.AlertTypeEnum=Te.N,this.outputLogs$=new y.X(void 0),this.showOutputLogs=!1,this.retrievingOutputLogs$=new y.X(!1),this.dateFormat="yyyy-MM-dd HH:mm:ss ZZZZ",this.refreshCounter$=new y.X(0)}ngOnInit(){this.processRD$=this.route.data.pipe((0,f.U)(t=>((0,p.NF)(this.platformId)&&(this.isProcessFinished(t.process.payload)||this.startRefreshTimer()),t.process)),(0,z.Gh)(this.router,this.authService),(0,U.d)(1)),this.filesRD$=this.processRD$.pipe((0,d.Gp)(),(0,g.w)(t=>this.processService.getFiles(t.processId)))}refresh(){this.processRD$=this.processService.findById(this.route.snapshot.params.id,!1,!0,(0,C.l)("script")).pipe((0,d.xw)(),(0,z.Gh)(this.router,this.authService),(0,T.b)(t=>{this.isProcessFinished(t.payload)||this.startRefreshTimer()}),(0,U.d)(1)),this.filesRD$=this.processRD$.pipe((0,d.Gp)(),(0,g.w)(t=>this.processService.getFiles(t.processId)))}startRefreshTimer(){this.refreshCounter$.next(0),this.refreshTimerSub=(0,Ie.F)(1e3).subscribe(t=>{t>5?setTimeout(()=>{this.refresh(),this.stopRefreshTimer(),this.refreshCounter$.next(0)},1):this.refreshCounter$.next(5-t)})}stopRefreshTimer(){(0,m.Uh)(this.refreshTimerSub)&&(this.refreshTimerSub.unsubscribe(),this.refreshTimerSub=void 0)}getFileName(t){return t instanceof be.t?this.nameService.getName(t):"unknown"}showProcessOutputLogs(){this.retrievingOutputLogs$.next(!0),this.zone.runOutsideAngular(()=>{const t=this.processRD$.pipe((0,d.Gp)(),(0,g.w)(r=>this.bitstreamDataService.findByHref(r._links.output.href,!1)));this.outputLogFileUrl$=t.pipe((0,d.xw)(),(0,T.b)(r=>{204===r.statusCode&&(this.zone.run(()=>this.retrievingOutputLogs$.next(!1)),this.showOutputLogs=!0)}),(0,g.w)(r=>{const a=r.payload._links.content.href;return this.authService.getShortlivedToken().pipe((0,F.q)(1),(0,f.U)(s=>(0,m.Uh)(s)?new we.R(a,`?authentication-token=${s}`).toString():a))}))}),this.outputLogFileUrl$.pipe((0,F.q)(1),(0,g.w)(t=>this.getTextFile(t)),(0,A.x)(()=>this.zone.run(()=>this.retrievingOutputLogs$.next(!1)))).subscribe(t=>{this.outputLogs$.next(t)})}getTextFile(t){return this.http.get(t,{responseType:"text"}).pipe((0,A.x)(()=>{this.showOutputLogs=!0}))}isProcessFinished(t){return(0,m.Uh)(t)&&(0,m.Uh)(t.processStatus)&&(t.processStatus.toString()===P.N[P.N.COMPLETED].toString()||t.processStatus.toString()===P.N[P.N.FAILED].toString())}deleteProcess(t){this.processService.delete(t.processId).pipe((0,d.hC)()).subscribe(r=>{r.hasSucceeded?(this.notificationsService.success(this.translateService.get("process.detail.delete.success")),this.closeModal(),this.router.navigateByUrl((0,$.dz)())):this.notificationsService.error(this.translateService.get("process.detail.delete.error"))})}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close()}ngOnDestroy(){this.stopRefreshTimer()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(e.PLATFORM_ID),e.\u0275\u0275directiveInject(v.gz),e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(x.n),e.\u0275\u0275directiveInject(Ve.J),e.\u0275\u0275directiveInject(R._),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(Pe.e8),e.\u0275\u0275directiveInject(Fe.eN),e.\u0275\u0275directiveInject(k.FF),e.\u0275\u0275directiveInject(w.T),e.\u0275\u0275directiveInject(u.sK))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-detail"]],decls:4,vars:3,consts:[["class","container",4,"ngIf"],["deleteModal",""],[1,"container"],[1,"row"],[1,"col-10"],[1,"flex-grow-1"],["class","col-2 refresh-counter",4,"ngIf"],["id","process-name",3,"title"],["id","process-arguments",3,"title",4,"ngIf"],[4,"ngVar"],["id","process-start-time",3,"title",4,"ngIf"],["id","process-end-time",3,"title",4,"ngIf"],["id","process-status",3,"title",4,"ngIf"],["id","process-output",3,"title",4,"ngIf"],["id","process-actions",3,"title"],["routerLink","/processes/new",1,"btn","btn-success","mr-2",3,"queryParams"],[1,"fas","fa-plus","pr-2"],["id","delete","class","btn btn-danger",3,"click",4,"ngIf"],[2,"text-align","right"],[1,"btn","btn-outline-secondary","mt-3",3,"routerLink"],[1,"col-2","refresh-counter"],[1,"fas","fa-sync-alt","fa-spin"],["id","process-arguments",3,"title"],[4,"ngFor","ngForOf"],["id","process-files",3,"title",4,"ngIf"],["id","process-files",3,"title"],[1,"d-flex","flex-column"],[3,"bitstream",4,"ngFor","ngForOf"],[3,"bitstream"],["id","process-start-time",3,"title"],["id","process-end-time",3,"title"],["id","process-status",3,"title"],["id","process-output",3,"title"],["id","showOutputButton","class","btn btn-primary",3,"click",4,"ngIf"],["class","ds-themed-loading",3,"message",4,"ngIf"],["class","font-weight-bold text-secondary bg-light p-3",4,"ngIf"],["id","no-output-logs-message",4,"ngIf"],["id","showOutputButton",1,"btn","btn-primary",3,"click"],[1,"ds-themed-loading",3,"message"],[1,"font-weight-bold","text-secondary","bg-light","p-3"],["id","no-output-logs-message"],["id","delete",1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash","pr-2"],[4,"ngIf"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mt-4"],[1,"btn","btn-primary","mr-2",3,"click"],["id","delete-confirm",1,"btn","btn-danger",3,"click"]],template:function(t,r){if(1&t&&(e.\u0275\u0275template(0,We,28,32,"div",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,et,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){let a;e.\u0275\u0275property("ngIf",null==(a=e.\u0275\u0275pipeBind1(1,1,r.processRD$))?null:a.payload)}},dependencies:[p.sg,p.O5,v.rH,Ee.Z,Be.t,b.g,De,p.Ov,p.uU,$e.p,u.X$],encapsulation:2}),n})();var H=o(76457),nt=o(9237),rt=o(17338);let J=(()=>{class n{getBreadcrumbs(t,r){return(0,nt.of)([new rt.a(t.processId+" - "+t.scriptName,r)])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),G=(()=>{class n{constructor(t,r){this.breadcrumbService=t,this.processService=r}resolve(t,r){const a=t.params.id;return this.processService.findById(t.params.id,!0,!1,(0,C.l)("script")).pipe((0,d.xw)(),(0,d.xe)(),(0,f.U)(s=>{const c=r.url,h=c.substr(0,c.indexOf(a))+a;return{provider:this.breadcrumbService,key:s,url:h}}))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(J),e.\u0275\u0275inject(x.n))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var it=o(99805);let at=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[L],imports:[v.Bz.forChild([{path:"",resolve:{breadcrumb:H.t},data:{breadcrumbKey:"process.overview"},canActivate:[it.J],children:[{path:"",component:ye,data:{title:"process.overview.title"}},{path:"new",component:re,resolve:{breadcrumb:H.t},data:{title:"process.new.title",breadcrumbKey:"process.new"}},{path:":id",component:tt,resolve:{process:L,breadcrumb:G}}]}])]}),n})();var st=o(49887),l=o(5476);function ot(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("ngValue",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function lt(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.select-script.required")," "))}function pt(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275template(1,lt,3,3,"div",9),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}function ct(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"label",2),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"select",3,4),e.\u0275\u0275listener("ngModelChange",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.selectedScript=a)}),e.\u0275\u0275elementStart(6,"option",5),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,ot,2,2,"option",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,pt,2,1,"div",7),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275reference(5),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,"process.new.select-script")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",r.selectedScript),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",void 0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,8,"process.new.select-script.placeholder")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(10,10,r.scripts$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.invalid&&(t.dirty||t.touched))}}const X="script";let dt=(()=>{class n{constructor(t,r,a){this.scriptService=t,this.router=r,this.route=a,this.select=new e.EventEmitter}ngOnInit(){this.scripts$=this.scriptService.findAll({elementsPerPage:9999}).pipe((0,d.xw)(),(0,d.xe)(),(0,f.U)(t=>t.page)),this.routeSub=this.route.queryParams.pipe((0,j.h)(t=>(0,m.xI)(t.id)),(0,f.U)(t=>t[X]),(0,st.x)(),(0,g.w)(t=>this.scripts$.pipe((0,F.q)(1),(0,f.U)(r=>r.find(a=>a.id===t))))).subscribe(t=>{this._selectedScript=t,this.select.emit(t)})}get selectedScript(){return this._selectedScript?this._selectedScript.id:void 0}set selectedScript(t){this.router.navigate([],{queryParams:{[X]:t}})}set script(t){this._selectedScript=t}ngOnDestroy(){(0,m.Uh)(this.routeSub)&&this.routeSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(D.UY),e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(v.gz))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-scripts-select"]],inputs:{script:"script"},outputs:{select:"select"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}])],decls:2,vars:3,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],["for","process-script"],["required","","id","process-script","name","script",1,"form-control",3,"ngModel","ngModelChange"],["script","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){1&t&&(e.\u0275\u0275template(0,ct,12,12,"div",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,r.scripts$))},dependencies:[p.sg,p.O5,l.YN,l.Kr,l.EJ,l.JJ,l.Q7,l.On,p.Ov,u.X$]}),n})();var S=(()=>{return(n=S||(S={})).STRING="String",n.DATE="date",n.BOOLEAN="boolean",n.FILE="InputStream",n.OUTPUT="OutputStream",S;var n})();function mt(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function ut(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",4),e.\u0275\u0275text(2),e.\u0275\u0275template(3,mt,1,0,"ng-container",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&n){const t=i.$implicit;e.\u0275\u0275nextContext();const r=e.\u0275\u0275reference(8);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.name," ",t.nameLong," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description)}}function vt(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function ft(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function gt(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function _t(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.file"),">"))}function ht(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0,6),e.\u0275\u0275template(1,vt,3,3,"span",7),e.\u0275\u0275template(2,ft,3,3,"span",7),e.\u0275\u0275template(3,gt,3,3,"span",7),e.\u0275\u0275template(4,_t,3,3,"span",7),e.\u0275\u0275elementContainerEnd()),2&n){const t=i.type,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngSwitch",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.DATE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.STRING),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.OUTPUT),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.FILE)}}let xt=(()=>{class n{constructor(){this.parameterTypes=S}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-script-help"]],inputs:{script:"script"},decls:9,vars:3,consts:[[1,"text-secondary"],[1,"table-borderless","mt-3"],[4,"ngFor","ngForOf"],["type",""],[1,"align-top","text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h3"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"table",1),e.\u0275\u0275template(6,ut,6,5,"tr",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,ht,5,5,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==r.script?null:r.script.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==r.script?null:r.script.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==r.script?null:r.script.parameters))},dependencies:[p.sg,p.tP,p.RF,p.n9,u.X$]}),n})();var E=o(2910);let V=(()=>{class n{constructor(){this.updateValue=new e.EventEmitter}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-value-input"]],inputs:{index:"index"},outputs:{updateValue:"updateValue"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();function St(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.string.required")," "))}function Ct(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,St,3,3,"div",4),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(1);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let yt=(()=>{class n extends V{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-string-value-input"]],inputs:{initialValue:"initialValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[["required","","type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],["string","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"input",0,1),e.\u0275\u0275listener("ngModelChange",function(s){return r.setValue(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Ct,2,1,"div",2)),2&t){const a=e.\u0275\u0275reference(1);e.\u0275\u0275propertyInterpolate1("name","string-value-",r.index,"")("id","string-value-",r.index,""),e.\u0275\u0275property("ngModel",r.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.invalid&&(a.dirty||a.touched))}},dependencies:[p.O5,l.Fj,l.JJ,l.Q7,l.On,u.X$]}),n})();var It=o(42921),Pt=o(64377);function Vt(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.file.required")," "))}function bt(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,Vt,3,3,"div",7),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(7);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let wt=(()=>{class n extends V{setFile(t){this.fileObject=t.length>0?t[0]:void 0,this.updateValue.emit(this.fileObject)}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-file-value-input"]],features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:9,consts:[[1,"d-flex","align-items-center","m-0",3,"for"],[1,"btn","btn-light"],[1,"file-name","ml-1"],["requireFile","","type","file",1,"form-control-file","d-none",3,"name","id","ngModel","ngModelChange"],["file","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"label",0)(1,"span",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",2),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"input",3,4),e.\u0275\u0275listener("ngModelChange",function(s){return r.setFile(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,bt,2,1,"div",5)),2&t){const a=e.\u0275\u0275reference(7);e.\u0275\u0275propertyInterpolate1("for","file-upload-",r.index,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,7,"process.new.parameter.file.upload-button")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==r.fileObject?null:r.fileObject.name),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("name","file-upload-",r.index,"")("id","file-upload-",r.index,""),e.\u0275\u0275property("ngModel",r.fileObject),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.invalid&&(a.dirty||a.touched))}},dependencies:[p.O5,l.Fj,l.JJ,l.On,It.k,Pt.C,u.X$],styles:[".file-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})(),Tt=(()=>{class n extends V{ngOnInit(){this.updateValue.emit(!0)}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-boolean-value-input"]],features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["type","hidden","value","true",3,"name","id"]],template:function(t,r){1&t&&e.\u0275\u0275element(0,"input",0),2&t&&e.\u0275\u0275propertyInterpolate1("name","boolean-value-",r.index,"")("id","boolean-value-",r.index,"")}}),n})();function Ft(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.string.required")," "))}function Et(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,Ft,3,3,"div",4),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(1);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let Bt=(()=>{class n extends V{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-date-value-input"]],inputs:{initialValue:"initialValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[["required","","type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],["string","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"input",0,1),e.\u0275\u0275listener("ngModelChange",function(s){return r.setValue(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Et,2,1,"div",2)),2&t){const a=e.\u0275\u0275reference(1);e.\u0275\u0275propertyInterpolate1("name","date-value-",r.index,"")("id","date-value-",r.index,""),e.\u0275\u0275property("ngModel",r.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.invalid&&(a.dirty||a.touched))}},dependencies:[p.O5,l.Fj,l.JJ,l.Q7,l.On,u.X$]}),n})();function Ot(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-string-value-input",3),e.\u0275\u0275listener("updateValue",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updateValue.emit(a))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function Dt(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-string-value-input",3),e.\u0275\u0275listener("updateValue",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updateValue.emit(a))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function $t(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-date-value-input",3),e.\u0275\u0275listener("updateValue",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updateValue.emit(a))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function Mt(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-file-value-input",4),e.\u0275\u0275listener("updateValue",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updateValue.emit(a))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("index",t.index)}}function jt(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-boolean-value-input",4),e.\u0275\u0275listener("updateValue",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updateValue.emit(a))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("index",t.index)}}let Rt=(()=>{class n{constructor(){this.updateValue=new e.EventEmitter,this.parameterTypes=S}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-parameter-value-input"]],inputs:{index:"index",parameter:"parameter",initialValue:"initialValue"},outputs:{updateValue:"updateValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}])],decls:6,vars:6,consts:[[3,"ngSwitch"],[3,"initialValue","index","updateValue",4,"ngSwitchCase"],[3,"index","updateValue",4,"ngSwitchCase"],[3,"initialValue","index","updateValue"],[3,"index","updateValue"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Ot,1,2,"ds-string-value-input",1),e.\u0275\u0275template(2,Dt,1,2,"ds-string-value-input",1),e.\u0275\u0275template(3,$t,1,2,"ds-date-value-input",1),e.\u0275\u0275template(4,Mt,1,1,"ds-file-value-input",2),e.\u0275\u0275template(5,jt,1,1,"ds-boolean-value-input",2),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("ngSwitch",null==r.parameter?null:r.parameter.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.STRING),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.OUTPUT),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.DATE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.FILE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.BOOLEAN))},dependencies:[p.RF,p.n9,yt,wt,Tt,Bt]}),n})();function kt(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",3),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("ngValue",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nameLong||t.name," ")}}function Nt(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.removeParameter.emit(a.parameterValue))}),e.\u0275\u0275element(1,"span",9),e.\u0275\u0275elementEnd()}}function Lt(n,i){1&n&&e.\u0275\u0275element(0,"span",10)}let Ut=(()=>{class n{constructor(){this.parameterValue=new E.N,this.removeParameter=new e.EventEmitter,this.changeParameter=new e.EventEmitter}get selectedScriptParameter(){return this.parameters.find(t=>t.name===this.selectedParameter)}get selectedParameter(){return this.parameterValue?this.parameterValue.name:void 0}set selectedParameter(t){this.parameterValue.name=t,this.selectedParameterValue=void 0,this.changeParameter.emit(this.parameterValue)}get selectedParameterValue(){return this.parameterValue?this.parameterValue.value:void 0}set selectedParameterValue(t){this.parameterValue.value=t,this.changeParameter.emit(this.parameterValue)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-parameter-select"]],inputs:{index:"index",parameterValue:"parameterValue",parameters:"parameters",removable:"removable"},outputs:{removeParameter:"removeParameter",changeParameter:"changeParameter"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}])],decls:9,vars:9,consts:[[1,"form-row","mb-2","mx-0"],["id","process-parameters",1,"form-control","col",3,"name","ngModel","ngModelChange"],["param","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-block","col",3,"initialValue","parameter","index","updateValue"],["class","btn btn-light col-1 remove-button",3,"click",4,"ngIf"],["class","col-1",4,"ngIf"],[1,"btn","btn-light","col-1","remove-button",3,"click"],[1,"fas","fa-trash"],[1,"col-1"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"select",1,2),e.\u0275\u0275listener("ngModelChange",function(s){return r.selectedParameter=s}),e.\u0275\u0275elementStart(3,"option",3),e.\u0275\u0275text(4,"Add a parameter..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,kt,2,2,"option",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"ds-parameter-value-input",5),e.\u0275\u0275listener("updateValue",function(s){return r.selectedParameterValue=s}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Nt,2,0,"button",6),e.\u0275\u0275template(8,Lt,1,0,"span",7),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("name","parameter-",r.index,""),e.\u0275\u0275property("ngModel",r.selectedParameter),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",void 0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.parameters),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialValue",r.parameterValue.value)("parameter",r.selectedScriptParameter)("index",r.index),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.removable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.removable))},dependencies:[p.sg,p.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,Rt]}),n})();function At(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-parameter-select",3),e.\u0275\u0275listener("removeParameter",function(){const s=e.\u0275\u0275restoreView(t).index,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.removeParameter(s))})("changeParameter",function(a){const c=e.\u0275\u0275restoreView(t).index,h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.updateParameter(a,c))}),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,r=i.index,a=i.last,s=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("parameters",s.script.parameters)("parameterValue",t)("removable",!a)("index",r)}}function zt(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",1)(1,"label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,At,1,4,"ds-parameter-select",2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"process.new.select-parameters")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.parameterValues)}}let Ht=(()=>{class n{constructor(){this.updateParameters=new e.EventEmitter}ngOnInit(){(0,m.Uh)(this.initialParams)&&(this.parameterValues=this.initialParams)}ngOnChanges(t){t.script&&this.initParameters()}initParameters(){(0,m.Uh)(this.initialParams)?this.parameterValues=this.initialParams:(this.parameterValues=[],this.initializeParameter())}updateParameter(t,r){this.parameterValues[r]=t,r===this.parameterValues.length-1&&this.addParameter(),this.updateParameters.emit(this.parameterValues.filter(a=>(0,m.Uh)(a.name)))}removeParameter(t){this.parameterValues=this.parameterValues.filter((r,a)=>a!==t),this.updateParameters.emit(this.parameterValues.filter(r=>(0,m.Uh)(r.name)))}initializeParameter(){(0,m.Uh)(this.script)&&(this.parameterValues=this.script.parameters.filter(t=>t.mandatory).map(t=>Object.assign(new E.N,{name:t.name}))),this.addParameter()}addParameter(){this.parameterValues=[...this.parameterValues,new E.N]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-parameters"]],inputs:{script:"script",initialParams:"initialParams"},outputs:{updateParameters:"updateParameters"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","form-group","data-testID","parameters-select-container",4,"ngIf"],["data-testID","parameters-select-container",1,"form-group"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter",4,"ngFor","ngForOf"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter"]],template:function(t,r){1&t&&e.\u0275\u0275template(0,zt,5,4,"div",0),2&t&&e.\u0275\u0275property("ngIf",null==r.script||null==r.script.parameters?null:r.script.parameters.length)},dependencies:[p.sg,p.O5,Ut,u.X$]}),n})(),Jt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[G,J],imports:[O.m]}),n})();e.\u0275\u0275setComponentScope(M,[p.sg,p.O5,l._Y,l.JL,l.F,v.rH,dt,xt,Ht],[u.X$]);let Gt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[at,O.m,Jt]}),n})()}}]);