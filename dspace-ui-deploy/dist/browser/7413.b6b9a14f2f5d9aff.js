"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[7413,22,8903],{16216:(L,f,o)=>{o.d(f,{M:()=>U});var e=o(98678),D=o(35841),C=o(53426),O=o(38123),g=o(55624),r=o(6952),c=o(89333),l=o(66234),a=o(45608),B=o(65384),R=o(22170),t=o(17026),T=o(10572),_=o(5737),E=o(96342),s=o(35103),d=o(82485),v=o(41966),M=o(62832);function P(n,p){if(1&n){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const h=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(h.deleteLogo())}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"i",16),e.\u0275\u0275elementEnd()}if(2&n){const i=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,1,i.type.value+".edit.logo.delete.title"))}}function I(n,p){if(1&n){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const h=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(h.undoDeleteLogo())}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"i",18),e.\u0275\u0275elementEnd()}if(2&n){const i=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,1,i.type.value+".edit.logo.delete-undo.title"))}}function x(n,p){if(1&n&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275template(1,P,3,3,"button",13),e.\u0275\u0275template(2,I,3,3,"button",14),e.\u0275\u0275elementEnd()),2&n){const i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.markLogoForDeletion),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.markLogoForDeletion)}}const A=function(n){return{"alert-danger":n}};function K(n,p){if(1&n&&(e.\u0275\u0275elementStart(0,"div",7)(1,"div",1)(2,"div",8),e.\u0275\u0275element(3,"ds-comcol-page-logo",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10),e.\u0275\u0275template(5,x,3,2,"div",11),e.\u0275\u0275elementEnd()()()),2&n){const i=e.\u0275\u0275nextContext().ngVar,u=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,A,u.markLogoForDeletion)),e.\u0275\u0275advance(3),e.\u0275\u0275property("logo",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i)}}function S(n,p){if(1&n){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-uploader",20),e.\u0275\u0275listener("onCompleteItem",function(){e.\u0275\u0275restoreView(i);const h=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(h.onCompleteItem())})("onUploadError",function(){e.\u0275\u0275restoreView(i);const h=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(h.onUploadError())}),e.\u0275\u0275elementEnd()}if(2&n){const i=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("dropMsg",i.type.value+".edit.logo.upload")("dropOverDocumentMsg",i.type.value+".edit.logo.upload")("enableDragOverDocument",!0)("uploadFilesOptions",i.uploadFilesOptions)}}function b(n,p){if(1&n&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,S,1,4,"ds-uploader",19),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&n){const i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,i.initializedUploaderOptions))}}function F(n,p){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,K,6,5,"div",5),e.\u0275\u0275template(2,b,3,3,"div",6),e.\u0275\u0275elementContainerEnd()),2&n){const i=p.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i)}}function m(n,p){if(1&n){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-form",21),e.\u0275\u0275listener("submitForm",function(){e.\u0275\u0275restoreView(i);const h=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(h.onSubmit())}),e.\u0275\u0275elementStart(1,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const h=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(h.back.emit())}),e.\u0275\u0275element(2,"i",23),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&n){const i=e.\u0275\u0275nextContext();e.\u0275\u0275property("formId","comcol-form-id")("formModel",i.formModel)("displayCancel",!1),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,i.type.value+".edit.return")," ")}}let U=(()=>{class n{constructor(i,u,h,y,W,$){this.formService=i,this.translate=u,this.notificationsService=h,this.authService=y,this.requestService=W,this.objectCache=$,this.LABEL_KEY_PREFIX=".form.",this.ERROR_KEY_PREFIX=".form.errors.",this.uploadFilesOptions=Object.assign(new R.n,{autoUpload:!1}),this.submitForm=new e.EventEmitter,this.back=new e.EventEmitter,this.finish=new e.EventEmitter,this.initializedUploaderOptions=new D.X(!1),this.markLogoForDeletion=!1,this.subs=[]}ngOnInit(){(0,a.Uh)(this.formModel)&&(this.formModel.forEach(i=>{i.value=this.dso.firstMetadataValue(i.name)}),this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),(0,a.Uh)(this.dso.id)?this.subs.push((0,C.a)([this.dsoService.getLogoEndpoint(this.dso.id),this.dso.logo]).subscribe(([i,u])=>{this.uploadFilesOptions.url=i,this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),(0,a.Uh)(u.payload)&&(this.uploadFilesOptions.method=c.a.PUT),this.initializedUploaderOptions.next(!0)})):(this.uploadFilesOptions.url="placeholder",this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.initializedUploaderOptions.next(!0)))}onSubmit(){this.markLogoForDeletion&&(0,a.Uh)(this.dso.id)&&(0,a.Uh)(this.dso._links.logo)&&this.dsoService.deleteLogo(this.dso).pipe((0,T.hC)()).subscribe(y=>{y.hasSucceeded?this.notificationsService.success(this.translate.get(this.type.value+".edit.logo.notifications.delete.success.title"),this.translate.get(this.type.value+".edit.logo.notifications.delete.success.content")):this.notificationsService.error(this.translate.get(this.type.value+".edit.logo.notifications.delete.error.title"),y.errorMessage),this.dso.logo=void 0,this.uploadFilesOptions.method=c.a.POST,this.finish.emit()});const i={};this.formModel.forEach(y=>{const W={value:y.value,language:null};i.hasOwnProperty(y.name)?i[y.name].push(W):i[y.name]=[W]});const u=Object.assign({},this.dso,{metadata:{...this.dso.metadata,...i},type:l.S.type}),h=[];this.formModel.forEach(y=>{y.value!==this.dso.firstMetadataValue(y.name)&&h.push({op:"replace",path:`/metadata/${y.name}`,value:{value:y.value,language:null}})}),this.submitForm.emit({dso:u,uploader:(0,a.Uh)(this.uploaderComponent)?this.uploaderComponent.uploader:void 0,deleteLogo:this.markLogoForDeletion,operations:h})}updateFieldTranslations(){this.formModel.forEach(i=>{i.label=this.translate.instant(this.type.value+this.LABEL_KEY_PREFIX+i.id),(0,a.UE)(i.validators)&&(i.errorMessages={},Object.keys(i.validators).forEach(u=>{i.errorMessages[u]=this.translate.instant(this.type.value+this.ERROR_KEY_PREFIX+i.id+"."+u)}))})}deleteLogo(){this.markLogoForDeletion=!0}undoDeleteLogo(){this.markLogoForDeletion=!1}refreshCache(){this.requestService.removeByHrefSubstring(this.dso._links.self.href),this.objectCache.remove(this.dso._links.self.href)}onCompleteItem(){(0,a.Uh)(this.dso.id)&&this.refreshCache(),this.notificationsService.success(null,this.translate.get(this.type.value+".edit.logo.notifications.add.success")),this.finish.emit()}onUploadError(){this.notificationsService.error(null,this.translate.get(this.type.value+".edit.logo.notifications.add.error")),this.finish.emit()}ngOnDestroy(){this.subs.filter(i=>(0,a.Uh)(i)).forEach(i=>i.unsubscribe())}}return n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(_.w1X),e.\u0275\u0275directiveInject(E.sK),e.\u0275\u0275directiveInject(B.T),e.\u0275\u0275directiveInject(O.e8),e.\u0275\u0275directiveInject(r.s),e.\u0275\u0275directiveInject(g.a))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-comcol-form"]],viewQuery:function(i,u){if(1&i&&e.\u0275\u0275viewQuery(t.B,5),2&i){let h;e.\u0275\u0275queryRefresh(h=e.\u0275\u0275loadQuery())&&(u.uploaderComponent=h.first)}},inputs:{dso:"dso"},outputs:{submitForm:"submitForm",back:"back",finish:"finish"},decls:9,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","d-inline-block"],[4,"ngVar"],[3,"formId","formModel","displayCancel","submitForm",4,"ngIf"],["class","col-12 d-inline-block alert","id","logo-section",3,"ngClass",4,"ngIf"],["class","col-12 d-inline-block",4,"ngIf"],["id","logo-section",1,"col-12","d-inline-block","alert",3,"ngClass"],[1,"col-8","d-inline-block"],[3,"logo"],[1,"col-4","d-inline-block"],["class","btn-group btn-group-sm float-right","role","group",4,"ngIf"],["role","group",1,"btn-group","btn-group-sm","float-right"],["type","button","class","btn btn-danger",3,"title","click",4,"ngIf"],["type","button","class","btn btn-warning",3,"title","click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],["type","button",1,"btn","btn-warning",3,"title","click"],["aria-hidden","true",1,"fas","fa-undo"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError"],[3,"formId","formModel","displayCancel","submitForm"],["before","","type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"]],template:function(i,u){if(1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"label"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,F,3,2,"ng-container",3),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,m,5,6,"ds-form",4)),2&i){let h;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,3,u.type.value+".edit.logo.label")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",null==(h=e.\u0275\u0275pipeBind1(7,5,null==u.dso?null:u.dso.logo))?null:h.payload),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",u.formModel)}},dependencies:[s.mk,s.O5,d.U,v.g,t.B,M.e,s.Ov,E.X$]}),n})()},42821:(L,f,o)=>{o.d(f,{k:()=>E});var e=o(77176),D=o(69637),C=o(54140),O=o(50401),g=o(74997),r=o(10572),c=o(45608),l=o(65384),a=o(5803),B=o(6952),R=o(8842),t=o(98678),T=o(67522),_=o(96342);let E=(()=>{class s{constructor(v,M,P,I,x,A,K,S){this.dsoDataService=v,this.dsoNameService=M,this.parentDataService=P,this.routeService=I,this.router=x,this.notificationsService=A,this.translate=K,this.requestService=S}ngOnInit(){this.parentUUID$=this.routeService.getQueryParameterValue("parent"),this.parentUUID$.pipe((0,e.q)(1)).subscribe(v=>{(0,c.UE)(v)&&(this.parentRD$=this.parentDataService.findById(v))})}onSubmit(v){const M=v.dso,P=v.uploader;this.parentUUID$.pipe((0,e.q)(1),(0,D.z)(I=>{const x=I?[new a.g("parent",I)]:[];return this.dsoDataService.create(M,...x).pipe((0,r.Gp)())})).subscribe(I=>{(0,c.pT)(I)&&(this.newUUID=I.uuid,P.queue.length>0?this.dsoDataService.getLogoEndpoint(this.newUUID).pipe((0,e.q)(1)).subscribe(x=>{P.options.url=x,P.uploadAll()}):this.navigateToNewPage(),this.dsoDataService.refreshCache(I)),this.notificationsService.success(null,this.translate.get(this.type.value+".create.notifications.success"))})}navigateToHome(){this.router.navigate(["/home"])}navigateToNewPage(){(0,c.Uh)(this.newUUID)&&this.router.navigate([this.frontendURL+this.newUUID])}}return s.\u0275fac=function(v){return new(v||s)(t.\u0275\u0275directiveInject(C.C),t.\u0275\u0275directiveInject(R._),t.\u0275\u0275directiveInject(O.w),t.\u0275\u0275directiveInject(g.MZ),t.\u0275\u0275directiveInject(T.F0),t.\u0275\u0275directiveInject(l.T),t.\u0275\u0275directiveInject(_.sK),t.\u0275\u0275directiveInject(B.s))},s.\u0275cmp=t.\u0275\u0275defineComponent({type:s,selectors:[["ds-create-comcol"]],decls:0,vars:0,template:function(v,M){},encapsulation:2}),s})()},8202:(L,f,o)=>{o.d(f,{M:()=>R});var e=o(35841),D=o(76215),C=o(48358),O=o(65384),g=o(10572),r=o(54140),c=o(8842),l=o(98678),a=o(67522),B=o(96342);let R=(()=>{class t{constructor(_,E,s,d,v,M){this.dsoDataService=_,this.dsoNameService=E,this.router=s,this.route=d,this.notifications=v,this.translate=M,this.processing$=new e.X(!1)}ngOnInit(){this.dsoRD$=this.route.data.pipe((0,D.P)(),(0,C.U)(_=>_.dso))}onConfirm(_){this.processing$.next(!0),this.dsoDataService.delete(_.id).pipe((0,g.hC)()).subscribe(E=>{if(E.hasSucceeded){const s=this.translate.instant(_.type+".delete.notification.success");this.notifications.success(s)}else{const s=this.translate.instant(_.type+".delete.notification.fail");this.notifications.error(s)}this.router.navigate(["/"])})}onCancel(_){this.router.navigate([this.frontendURL+"/"+_.uuid+"/edit"])}}return t.\u0275fac=function(_){return new(_||t)(l.\u0275\u0275directiveInject(r.C),l.\u0275\u0275directiveInject(c._),l.\u0275\u0275directiveInject(a.F0),l.\u0275\u0275directiveInject(a.gz),l.\u0275\u0275directiveInject(O.T),l.\u0275\u0275directiveInject(B.sK))},t.\u0275cmp=l.\u0275\u0275defineComponent({type:t,selectors:[["ds-delete-comcol"]],decls:0,vars:0,template:function(_,E){},encapsulation:2}),t})()},31258:(L,f,o)=>{o.d(f,{b:()=>F});var e=o(35841),D=o(30303),C=o(21160),O=o(77007),g=o(48358),r=o(10572),c=o(6952),l=o(66421),a=o(45608),B=o(65384),R=o(8842),t=o(98678),T=o(96342),_=o(35103),E=o(67522),s=o(87586),d=o(87657),v=o(41966);function M(m,U){1&m&&t.\u0275\u0275element(0,"ds-themed-loading")}function P(m,U){1&m&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&m&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit.no-group")," "))}function I(m,U){if(1&m&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&m){const n=t.\u0275\u0275nextContext(2);let p;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit."+(null==(p=t.\u0275\u0275pipeBind1(3,3,n.comcolRole$))?null:p.name)+".anonymous-group")," ")}}function x(m,U){if(1&m&&(t.\u0275\u0275elementStart(0,"a",13),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&m){const n=t.\u0275\u0275nextContext().ngVar,p=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("routerLink",t.\u0275\u0275pipeBind1(1,2,p.editGroupLink$)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",p.dsoNameService.getName(n)," ")}}function A(m,U){if(1&m){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.create())}),t.\u0275\u0275element(1,"i",15),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&m&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"comcol-role.edit.create")," "))}function K(m,U){if(1&m){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.create())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&m&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit.restrict")," "))}function S(m,U){if(1&m){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",17),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.delete())}),t.\u0275\u0275element(1,"i",18),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&m&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"comcol-role.edit.delete")," "))}function b(m,U){if(1&m&&(t.\u0275\u0275elementStart(0,"div",1)(1,"h5",2),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",3)(5,"ds-alert",4),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",5)(10,"div",6),t.\u0275\u0275template(11,M,1,0,"ds-themed-loading",7),t.\u0275\u0275pipe(12,"async"),t.\u0275\u0275template(13,P,3,3,"div",7),t.\u0275\u0275pipe(14,"async"),t.\u0275\u0275template(15,I,4,5,"div",7),t.\u0275\u0275pipe(16,"async"),t.\u0275\u0275template(17,x,3,4,"a",8),t.\u0275\u0275pipe(18,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",9),t.\u0275\u0275template(20,A,4,3,"button",10),t.\u0275\u0275pipe(21,"async"),t.\u0275\u0275template(22,K,3,3,"button",11),t.\u0275\u0275pipe(23,"async"),t.\u0275\u0275template(24,S,4,3,"button",12),t.\u0275\u0275pipe(25,"async"),t.\u0275\u0275elementEnd()()()),2&m){const n=t.\u0275\u0275nextContext();let p;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,10,n.roleName$)," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("type","alert-info"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,12,"comcol-role.edit."+(null==(p=t.\u0275\u0275pipeBind1(8,14,n.comcolRole$))?null:p.name)+".description")),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",!t.\u0275\u0275pipeBind1(12,16,n.groupRD$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(14,18,n.hasNoGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(16,20,n.hasAnonymousGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(18,22,n.hasCustomGroup$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(21,24,n.hasNoGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(23,26,n.hasAnonymousGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(25,28,n.hasCustomGroup$))}}let F=(()=>{class m{constructor(n,p,i,u,h){this.requestService=n,this.groupService=p,this.notificationsService=i,this.translateService=u,this.dsoNameService=h,this.comcolRole$=new e.X(void 0)}get groupLink(){return this.comcolRole.href}set comcolRole(n){this.comcolRole$.next(n)}get comcolRole(){return this.comcolRole$.getValue()}create(){this.groupService.createComcolGroup(this.dso,this.comcolRole.name,this.groupLink).pipe((0,r.hC)()).subscribe(n=>{n.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,C.w)(p=>this.translateService.get("comcol-role.edit.create.error.title",{role:p}))),`${n.statusCode} ${n.errorMessage}`)})}delete(){this.groupService.deleteComcolGroup(this.groupLink).pipe((0,r.hC)()).subscribe(n=>{n.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,C.w)(p=>this.translateService.get("comcol-role.edit.delete.error.title",{role:p}))),n.errorMessage)})}ngOnInit(){this.groupRD$=this.comcolRole$.pipe((0,O.h)(n=>(0,a.Uh)(n)),(0,C.w)(n=>this.groupService.findByHref(n.href)),(0,r.f1)()),this.group$=this.groupRD$.pipe((0,g.U)(n=>{if((0,a.Uh)(n.payload))return n.payload})),this.editGroupLink$=this.group$.pipe((0,g.U)(n=>(0,a.Uh)(n)?(0,l.EV)(n.id):void 0)),this.hasNoGroup$=this.group$.pipe((0,g.U)(n=>(0,a.xI)(n))),this.hasAnonymousGroup$=this.group$.pipe((0,g.U)(n=>(0,a.Uh)(n)&&"Anonymous"===n.name)),this.hasCustomGroup$=this.group$.pipe((0,g.U)(n=>(0,a.Uh)(n)&&"Anonymous"!==n.name)),this.roleName$=this.translateService.get(`comcol-role.edit.${this.comcolRole.name}.name`)}}return m.\u0275fac=function(n){return new(n||m)(t.\u0275\u0275directiveInject(c.s),t.\u0275\u0275directiveInject(D.O),t.\u0275\u0275directiveInject(B.T),t.\u0275\u0275directiveInject(T.sK),t.\u0275\u0275directiveInject(R._))},m.\u0275cmp=t.\u0275\u0275defineComponent({type:m,selectors:[["ds-comcol-role"]],inputs:{dso:"dso",comcolRole:"comcolRole"},decls:4,vars:8,consts:[["class","card-body d-flex flex-column",4,"ngVar"],[1,"card-body","d-flex","flex-column"],[1,"w-100"],[1,"mt-2","mb-2"],[3,"type"],[1,"d-flex","flex-md-row","justify-content-between","flex-column"],[1,"w-100","d-flex","align-items-center"],[4,"ngIf"],[3,"routerLink",4,"ngIf"],[1,"flex-shrink-0"],["class","btn btn-primary create",3,"click",4,"ngIf"],["class","btn btn-primary restrict",3,"click",4,"ngIf"],["class","btn btn-danger delete",3,"click",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-primary","create",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[1,"btn","btn-primary","restrict",3,"click"],[1,"btn","btn-danger","delete",3,"click"],["aria-hidden","true",1,"fas","fa-trash"]],template:function(n,p){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275template(2,b,26,30,"div",0),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&n){let i;t.\u0275\u0275classMapInterpolate1("card p-2 m-3 ",null==(i=t.\u0275\u0275pipeBind1(1,4,p.comcolRole$))?null:i.name,""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngVar",t.\u0275\u0275pipeBind1(3,6,p.group$))}},dependencies:[_.O5,E.rH,s.w,d.Z,v.g,_.Ov,T.X$]}),m})()},24806:(L,f,o)=>{o.d(f,{x:()=>g});var e=o(48358),D=o(45608),C=o(98678),O=o(67522);let g=(()=>{class r{constructor(l,a){this.router=l,this.route=a,this.router.events.subscribe(()=>this.initPageParamsByRoute())}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.map(l=>l.path).filter(l=>(0,D.UE)(l)),this.dsoRD$=this.route.data.pipe((0,e.U)(l=>l.dso))}getPageUrl(l){return this.router.url}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path,this.hideReturnButton=this.route.routeConfig.children.find(l=>l.path===this.currentPage).data.hideReturnButton}}return r.\u0275fac=function(l){return new(l||r)(C.\u0275\u0275directiveInject(O.F0),C.\u0275\u0275directiveInject(O.gz))},r.\u0275cmp=C.\u0275\u0275defineComponent({type:r,selectors:[["ds-edit-comcol"]],decls:0,vars:0,template:function(l,a){},encapsulation:2}),r})()},60022:(L,f,o)=>{o.r(f),o.d(f,{ComcolPageBrowseByComponent:()=>T});var e=o(48358),D=o(25584),C=o(42620),O=o(10572),g=o(1081),r=o(98678),c=o(67522),l=o(35103),a=o(5476),B=o(96342);function R(_,E){if(1&_&&(r.\u0275\u0275elementStart(0,"a",8),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"translate"),r.\u0275\u0275elementEnd()),2&_){const s=E.$implicit;r.\u0275\u0275property("routerLink",s.routerLink)("queryParams",s.params),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(2,3,s.label))}}function t(_,E){if(1&_&&(r.\u0275\u0275elementStart(0,"option",9),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"translate"),r.\u0275\u0275elementEnd()),2&_){const s=E.$implicit,d=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngValue",s.id),r.\u0275\u0275attribute("selected",r.\u0275\u0275pipeBind1(1,3,d.currentOptionId$)===s.id?"selected":null),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(3,5,s.label))}}let T=(()=>{class _{constructor(s,d,v){this.route=s,this.router=d,this.browseService=v}ngOnInit(){this.browseService.getBrowseDefinitions().pipe((0,O.hC)()).subscribe(s=>{s.hasSucceeded&&(this.allOptions=s.payload.page.map(d=>({id:d.id,label:`browse.comcol.by.${d.id}`,routerLink:`/browse/${d.id}`,params:{scope:this.id}})),"collection"===this.contentType?this.allOptions=[{id:this.id,label:"collection.page.browse.recent.head",routerLink:(0,C.MI)(this.id)},...this.allOptions]:"community"===this.contentType&&(this.allOptions=[{id:this.id,label:"community.all-lists.head",routerLink:(0,D.Ke)(this.id)},...this.allOptions]))}),this.currentOptionId$=this.route.params.pipe((0,e.U)(s=>s.id))}onSelectChange(s){const d=this.allOptions.find(v=>v.id===s);this.router.navigate([d.routerLink],{queryParams:d.params})}}return _.\u0275fac=function(s){return new(s||_)(r.\u0275\u0275directiveInject(c.gz),r.\u0275\u0275directiveInject(c.F0),r.\u0275\u0275directiveInject(g.I))},_.\u0275cmp=r.\u0275\u0275defineComponent({type:_,selectors:[["ds-comcol-page-browse-by"]],inputs:{id:"id",contentType:"contentType"},decls:11,vars:8,consts:[[1,"comcol-browse-label","h5"],["aria-label","Browse Community or Collection",1,"comcol-browse","mb-4"],[1,"d-none","d-sm-block"],[1,"list-group","list-group-horizontal"],["class","list-group-item","routerLinkActive","active",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"d-block","d-sm-none"],["name","browse-type","aria-label","Browse Community or Collection",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"list-group-item",3,"routerLink","queryParams"],[3,"ngValue"]],template:function(s,d){1&s&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"translate"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"nav",1)(4,"div",2)(5,"div",3),r.\u0275\u0275template(6,R,3,5,"a",4),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"div",5)(8,"select",6),r.\u0275\u0275listener("ngModelChange",function(M){return d.onSelectChange(M)}),r.\u0275\u0275pipe(9,"async"),r.\u0275\u0275template(10,t,4,7,"option",7),r.\u0275\u0275elementEnd()()()),2&s&&(r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(2,4,"browse.comcol.head")),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",d.allOptions),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",r.\u0275\u0275pipeBind1(9,6,d.currentOptionId$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",d.allOptions))},dependencies:[l.sg,a.YN,a.Kr,a.EJ,a.JJ,a.On,c.rH,c.Od,l.Ov,B.X$]}),_})()},8903:(L,f,o)=>{o.r(f),o.d(f,{ComcolPageHandleComponent:()=>r});var e=o(98678),D=o(35103),C=o(96342);function O(c,l){if(1&c&&(e.\u0275\u0275elementStart(0,"h2",5),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&c){const a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,a.title))}}function g(c,l){if(1&c&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,O,3,3,"h2",2),e.\u0275\u0275elementStart(2,"div",3)(3,"a",4),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&c){const a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.title),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("href",a.getHandle(),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(a.getHandle())}}let r=(()=>{class c{getHandle(){return this.content}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=e.\u0275\u0275defineComponent({type:c,selectors:[["ds-comcol-page-handle"]],inputs:{title:"title",content:"content"},decls:1,vars:1,consts:[["class","content-with-optional-title mb-2",4,"ngIf"],[1,"content-with-optional-title","mb-2"],["class","d-inline-block h6",4,"ngIf"],[1,"d-inline-block","px-2"],[3,"href"],[1,"d-inline-block","h6"]],template:function(a,B){1&a&&e.\u0275\u0275template(0,g,5,3,"div",0),2&a&&e.\u0275\u0275property("ngIf",B.content)},dependencies:[D.O5,C.X$],styles:["div[_ngcontent-%COMP%]{word-break:break-word;word-wrap:break-word;overflow-wrap:break-word}"]}),c.\u0275prov=e.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c})()},47413:(L,f,o)=>{o.d(f,{H:()=>M});var e=o(35103),_=(o(74487),o(8903),o(87635),o(22369),o(62832),o(16216),o(42821),o(24806),o(8202),o(60022),o(10825),o(31258),o(57999)),E=o(50867),s=o(89716),d=o(98678);let M=(()=>{class P{}return P.\u0275fac=function(x){return new(x||P)},P.\u0275mod=d.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=d.\u0275\u0275defineInjector({imports:[e.ez,E.e,_.m,s.c,s.c]}),P})()}}]);