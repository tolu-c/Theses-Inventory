"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[8572],{68572:(g,c,s)=>{s.d(c,{V:()=>M});var e=s(98678),n=s(5737),p=s(45608),u=s(75195),_=s(65384),f=s(48358),d=s(10572),l=s(96342),E=s(35103),m=s(5476),h=s(87586),P=s(82485);function v(r,a){if(1&r&&e.\u0275\u0275element(0,"ds-form",4),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formId",t.FORM_PREFIX)("formModel",t.formModel)("formGroup",t.formGroup)("displaySubmit",!1)("displayCancel",!1)}}function y(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.FORM_PREFIX+"error.matching-passwords"))}}function I(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.FORM_PREFIX+"error.empty-password"))}}let M=(()=>{class r{constructor(t,o,i,w){this.formService=t,this.translate=o,this.epersonService=i,this.notificationsService=w,this.isInvalid=new e.EventEmitter,this.passwordValue=new e.EventEmitter,this.currentPasswordValue=new e.EventEmitter,this.formModel=[new n.b1u({id:"password",name:"password",inputType:"password"}),new n.b1u({id:"passwordrepeat",name:"passwordrepeat",inputType:"password"})],this.passwordCanBeEmpty=!0,this.subs=[]}ngOnInit(){"profile.security.form."===this.FORM_PREFIX&&this.formModel.unshift(new n.b1u({id:"current-password",name:"current-password",inputType:"password",required:!0})),this.formGroup=this.formService.createFormGroup(this.formModel,this.passwordCanBeEmpty?{validators:[this.checkPasswordsEqual]}:{validators:[this.checkPasswordsEqual,this.checkPasswordEmpty]}),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),this.subs.push(this.formGroup.statusChanges.pipe((0,d.ig)(300),(0,f.U)(t=>"VALID"!==t)).subscribe(t=>this.isInvalid.emit(t))),this.subs.push(this.formGroup.valueChanges.pipe((0,d.ig)(300)).subscribe(t=>{this.passwordValue.emit(t.password),"profile.security.form."===this.FORM_PREFIX&&this.currentPasswordValue.emit(t["current-password"])}))}updateFieldTranslations(){this.formModel.forEach(t=>{t.label=this.translate.instant(this.FORM_PREFIX+"label."+t.id)})}checkPasswordsEqual(t){return t.get("password").value===t.get("passwordrepeat").value?null:{notSame:!0}}checkPasswordEmpty(t){const o=t.get("password").value;return(0,p.xb)(o)?{emptyPassword:!0}:null}ngOnDestroy(){this.subs.filter(t=>(0,p.Uh)(t)).forEach(t=>t.unsubscribe())}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(n.w1X),e.\u0275\u0275directiveInject(l.sK),e.\u0275\u0275directiveInject(u.k),e.\u0275\u0275directiveInject(_.T))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["ds-profile-page-security-form"]],inputs:{passwordCanBeEmpty:"passwordCanBeEmpty",FORM_PREFIX:"FORM_PREFIX"},outputs:{isInvalid:"isInvalid",passwordValue:"passwordValue",currentPasswordValue:"currentPasswordValue"},decls:6,vars:7,consts:[[1,"mb-4",3,"type"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],["id","notSame","class","container-fluid text-danger",4,"ngIf"],["id","emptyPassword","class","container-fluid text-danger",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"],["id","notSame",1,"container-fluid","text-danger"],["id","emptyPassword",1,"container-fluid","text-danger"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"ds-alert",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,v,1,5,"ds-form",1),e.\u0275\u0275template(4,y,3,3,"div",2),e.\u0275\u0275template(5,I,3,3,"div",3)),2&t&&(e.\u0275\u0275property("type","alert-info"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,5,o.FORM_PREFIX+"info")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.formModel),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.formGroup.hasError("notSame")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(o.formGroup.dirty||o.formGroup.touched)&&o.formGroup.hasError("emptyPassword")))},dependencies:[E.O5,m.JL,m.sg,h.w,P.U,l.X$],encapsulation:2}),r})()}}]);