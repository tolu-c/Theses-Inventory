(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[867,9966],{59966:(O,D,t)=>{"use strict";t.r(D),t.d(D,{DsDynamicLookupRelationExternalSourceTabComponent:()=>X});var e=t(98678),s=t(55963),o=t(27496),m=t(74304),d=(t(75606),t(48358)),v=t(21160),y=t(9302),C=t(58106),B=t(45180),L=t(83154),I=t(45608),F=t(91416),U=(t(13005),t(5378),t(81323)),M=t(10572),P=t(67522),b=t(65706),T=t(35103),j=t(64719),A=t(87657),W=t(12955),S=t(51864),K=t(42988),V=t(41966),G=t(96342);const z=function(r,_){return{repeatable:r,listId:_}};function $(r,_){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-viewable-collection",8),e.\u0275\u0275listener("importObject",function(i){e.\u0275\u0275restoreView(n);const x=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(x.import(i))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&r){const n=e.\u0275\u0275nextContext().ngVar,l=e.\u0275\u0275nextContext();e.\u0275\u0275property("@fadeIn",void 0)("objects",n)("selectionConfig",e.\u0275\u0275pureFunction2(10,z,l.repeatable,l.listId))("config",e.\u0275\u0275pipeBind1(1,8,l.currentPagination$))("hideGear",!0)("context",l.context)("importable",!0)("importConfig",l.importConfig)}}function Q(r,_){1&r&&(e.\u0275\u0275element(0,"ds-themed-loading",9),e.\u0275\u0275pipe(1,"translate")),2&r&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"loading.search-results"))}function N(r,_){1&r&&(e.\u0275\u0275element(0,"ds-error",9),e.\u0275\u0275pipe(1,"translate")),2&r&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"error.search-results"))}function J(r,_){1&r&&(e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&r&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"search.results.empty")," "))}function H(r,_){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,$,2,13,"ds-viewable-collection",5),e.\u0275\u0275template(2,Q,2,3,"ds-themed-loading",6),e.\u0275\u0275template(3,N,2,3,"ds-error",6),e.\u0275\u0275template(4,J,3,3,"div",7),e.\u0275\u0275elementContainerEnd()),2&r){const n=_.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==n?null:n.hasSucceeded)&&!(null!=n&&n.isLoading)&&(null==n||null==n.payload||null==n.payload.page?null:n.payload.page.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n||(null==n?null:n.isLoading)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==n?null:n.hasFailed)&&(!(null!=n&&n.errorMessage)||400!=(null==n?null:n.statusCode))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==(null==n||null==n.payload||null==n.payload.page?null:n.payload.page.length)||400==(null==n?null:n.statusCode))}}let X=(()=>{class r{constructor(n,l,i,x,Z,R){this.router=n,this.searchConfigService=l,this.externalSourceService=i,this.modalService=x,this.selectableListService=Z,this.paginationService=R,this.importedObject=new e.EventEmitter,this.initialPagination=Object.assign(new B.r,{id:"spc",pageSize:5}),this.subs=[]}ngOnInit(){this.externalSource.entityTypes.pipe((0,M.hC)(),(0,d.U)(n=>n.hasSucceeded&&n.payload.totalElements>0?n.payload.page[0]:null)).subscribe(n=>{this.relatedEntityType=n}),this.resetRoute(),this.entriesRD$=this.searchConfigService.paginatedSearchOptions.pipe((0,v.w)(n=>(""===n.query&&(n.query=this.query),this.externalSourceService.getExternalSourceEntries(this.externalSource.id,n).pipe((0,y.O)(void 0))))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination),this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}import(n){this.modalRef=this.modalService.open(L.a,{size:"lg",container:"ds-dynamic-lookup-relation-modal"});const l=this.modalRef.componentInstance.compRef$.pipe((0,I.tz)(),(0,d.U)(i=>i.instance));this.subs.push(l.subscribe(i=>{i.externalSourceEntry=n,i.item=this.item,i.relationship=this.relationship,i.label=this.label,i.relatedEntityType=this.relatedEntityType})),this.subs.push(l.pipe((0,v.w)(i=>i.importedObject)).subscribe(i=>{this.selectableListService.selectSingle(this.listId,i),this.importedObject.emit(i)}))}ngOnDestroy(){this.subs.filter(n=>(0,I.Uh)(n)).forEach(n=>n.unsubscribe())}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}return r.\u0275fac=function(n){return new(n||r)(e.\u0275\u0275directiveInject(P.F0),e.\u0275\u0275directiveInject(o.U),e.\u0275\u0275directiveInject(m.G),e.\u0275\u0275directiveInject(b.FF),e.\u0275\u0275directiveInject(F.w),e.\u0275\u0275directiveInject(U.N))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["ds-dynamic-lookup-relation-external-source-tab"]],inputs:{label:"label",listId:"listId",item:"item",collection:"collection",relationship:"relationship",context:"context",query:"query",repeatable:"repeatable",externalSource:"externalSource"},outputs:{importedObject:"importedObject"},features:[e.\u0275\u0275ProvidersFeature([{provide:s.SEARCH_CONFIG_SERVICE,useClass:o.U}])],decls:16,vars:16,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[3,"query","inPlaceSearch","searchPlaceholder"],[4,"ngVar"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"]],template:function(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"ds-page-size-selector"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",2),e.\u0275\u0275element(7,"ds-themed-search-form",3),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementStart(10,"div")(11,"h3"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,H,5,4,"ng-container",4),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementEnd()()()),2&n){let i;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,"submission.sections.describe.relationship-lookup.selection-tab.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275property("query",null==(i=e.\u0275\u0275pipeBind1(8,8,l.searchConfigService.paginatedSearchOptions))?null:i.query)("inPlaceSearch",!0)("searchPlaceholder",e.\u0275\u0275pipeBind1(9,10,"submission.sections.describe.relationship-lookup.selection-tab.search-form.placeholder")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,12,"submission.sections.describe.relationship-lookup.selection-tab.title."+l.externalSource.id)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(15,14,l.entriesRD$))}},dependencies:[T.O5,j.q,A.Z,W.c,S.p,K.k,V.g,T.Ov,G.X$],data:{animation:[C.Ji,C.Ic]}}),r})()},83154:(O,D,t)=>{"use strict";t.d(D,{a:()=>f});var e=t(4682),s=t(98678);function o(d,v){}const m=["*"];let f=(()=>{class d extends e.F{getComponentName(){return"ExternalSourceEntryImportModalComponent"}importThemedComponent(y){return t(41562)(`./${y}/app/shared/form/builder/ds-dynamic-form-ui/relation-lookup-modal/external-source-tab/external-source-entry-import-modal/external-source-entry-import-modal.component`)}importUnthemedComponent(){return t.e(4686).then(t.bind(t,14686))}}return d.\u0275fac=function(){let v;return function(C){return(v||(v=s.\u0275\u0275getInheritedFactory(d)))(C||d)}}(),d.\u0275cmp=s.\u0275\u0275defineComponent({type:d,selectors:[["ds-themed-external-source-entry-import-modal"]],features:[s.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:m,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(y,C){1&y&&(s.\u0275\u0275projectionDef(),s.\u0275\u0275template(0,o,0,0,"ng-template",null,0,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275elementStart(2,"div",null,1),s.\u0275\u0275projection(4),s.\u0275\u0275elementEnd())},encapsulation:2}),d})()},50867:(O,D,t)=>{"use strict";t.d(D,{e:()=>ne});var e=t(35103),s=t(82485),o=t(98678),m=t(5737),f=t(99811);function d(p,h){if(1&p){const a=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ds-dynamic-form-control-container",1),o.\u0275\u0275listener("dfBlur",function(E){o.\u0275\u0275restoreView(a);const u=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(u.onCustomEvent(E,u.blur))})("dfChange",function(E){o.\u0275\u0275restoreView(a);const u=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(u.onCustomEvent(E,u.change))})("dfFocus",function(E){o.\u0275\u0275restoreView(a);const u=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(u.onCustomEvent(E,u.focus))})("ngbEvent",function(E){o.\u0275\u0275restoreView(a);const u=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(u.onCustomEvent(E,u.ngbEvent))}),o.\u0275\u0275elementEnd()}if(2&p){const a=h.$implicit,c=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("d-none",a.hidden),o.\u0275\u0275property("formId",c.formId)("group",c.formGroup)("hasErrorMessaging",a.hasErrorMessages)("hidden",a.hidden)("layout",c.formLayout)("model",a)("templates",c.templates)("asBootstrapFormGroup",!0)}}let v=(()=>{class p extends m.rmD{constructor(a,c){super(a,c),this.blur=new o.EventEmitter,this.change=new o.EventEmitter,this.focus=new o.EventEmitter,this.ngbEvent=new o.EventEmitter}}return p.\u0275fac=function(a){return new(a||p)(o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(m.rJA))},p.\u0275cmp=o.\u0275\u0275defineComponent({type:p,selectors:[["ds-dynamic-form"]],contentQueries:function(a,c,E){if(1&a&&o.\u0275\u0275contentQuery(E,m.ATj,4),2&a){let u;o.\u0275\u0275queryRefresh(u=o.\u0275\u0275loadQuery())&&(c.templates=u)}},viewQuery:function(a,c){if(1&a&&o.\u0275\u0275viewQuery(f.B,5),2&a){let E;o.\u0275\u0275queryRefresh(E=o.\u0275\u0275loadQuery())&&(c.components=E)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","d-none","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(a,c){1&a&&o.\u0275\u0275template(0,d,1,10,"ds-dynamic-form-control-container",0),2&a&&o.\u0275\u0275property("ngForOf",c.formModel)("ngForTrackBy",c.trackByFn)},dependencies:[e.sg,f.B],encapsulation:2}),p})();t(21698),t(2709),t(54191),t(30139),t(4294),t(3067),t(9202),t(13616),t(83064);var M=t(4915),P=t(95623),W=(t(97611),t(59899),t(77665),t(59966),t(57999)),S=t(96342),K=t(29419),Q=(t(43090),t(47565),t(14686),t(380),t(71041)),X=(t(59690),t(61738),t(48715),t(65165)),n=(t(47610),t(30879),t(87893)),l=t(34774),i=t(4786),x=t(1908),R=(t(83154),t(65706)),q=t(37566),g=(t(29707),t(29409),t(5476)),Y=t(68650);let ne=(()=>{class p{}return p.\u0275fac=function(a){return new(a||p)},p.\u0275mod=o.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=o.\u0275\u0275defineInjector({providers:[{provide:m.y8$,useValue:f._},m.vnf,m.w1X,m.fhz,n.c,l.R,i.o],imports:[e.ez,m.H9g,Q.zj,K.t,W.m,S.aw,X.bQ,x.yI.forRoot(),R.M,R.UL,q.nZ]}),p})();o.\u0275\u0275setComponentScope(M.i,function(){return[e.mk,e.sg,g.JL,g.sg,g.x0,f.B]},[]),o.\u0275\u0275setComponentScope(P.s,function(){return[e.mk,e.sg,e.tP,g.JL,g.sg,g.x0,g.CE,Y.Wj,Y.Zt,Y.Bh,f.B]},[]),o.\u0275\u0275setComponentScope(s.U,function(){return[e.O5,m.ATj,g._Y,g.JL,g.sg,v]},function(){return[e.Ov,S.X$]})},41562:(O,D,t)=>{var e={"./custom/app/shared/form/builder/ds-dynamic-form-ui/relation-lookup-modal/external-source-tab/external-source-entry-import-modal/external-source-entry-import-modal.component":[15915,4686,8592,5915]};function s(o){if(!t.o(e,o))return Promise.resolve().then(()=>{var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d});var m=e[o],f=m[0];return Promise.all(m.slice(1).map(t.e)).then(()=>t(f))}s.keys=()=>Object.keys(e),s.id=41562,O.exports=s}}]);