(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[8927,9966],{59966:(C,h,n)=>{"use strict";n.r(h),n.d(h,{DsDynamicLookupRelationExternalSourceTabComponent:()=>z});var e=n(98678),s=n(55963),m=n(27496),g=n(74304),c=(n(75606),n(48358)),u=n(21160),D=n(9302),v=n(58106),O=n(45180),I=n(83154),f=n(45608),P=n(91416),M=(n(13005),n(5378),n(81323)),T=n(10572),S=n(67522),b=n(65706),x=n(35103),r=n(64719),_=n(87657),a=n(12955),d=n(51864),y=n(42988),R=n(41966),A=n(96342);const K=function(i,E){return{repeatable:i,listId:E}};function W(i,E){if(1&i){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-viewable-collection",8),e.\u0275\u0275listener("importObject",function(l){e.\u0275\u0275restoreView(o);const L=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(L.import(l))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&i){const o=e.\u0275\u0275nextContext().ngVar,p=e.\u0275\u0275nextContext();e.\u0275\u0275property("@fadeIn",void 0)("objects",o)("selectionConfig",e.\u0275\u0275pureFunction2(10,K,p.repeatable,p.listId))("config",e.\u0275\u0275pipeBind1(1,8,p.currentPagination$))("hideGear",!0)("context",p.context)("importable",!0)("importConfig",p.importConfig)}}function j(i,E){1&i&&(e.\u0275\u0275element(0,"ds-themed-loading",9),e.\u0275\u0275pipe(1,"translate")),2&i&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"loading.search-results"))}function F(i,E){1&i&&(e.\u0275\u0275element(0,"ds-error",9),e.\u0275\u0275pipe(1,"translate")),2&i&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"error.search-results"))}function V(i,E){1&i&&(e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"search.results.empty")," "))}function $(i,E){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,W,2,13,"ds-viewable-collection",5),e.\u0275\u0275template(2,j,2,3,"ds-themed-loading",6),e.\u0275\u0275template(3,F,2,3,"ds-error",6),e.\u0275\u0275template(4,V,3,3,"div",7),e.\u0275\u0275elementContainerEnd()),2&i){const o=E.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==o?null:o.hasSucceeded)&&!(null!=o&&o.isLoading)&&(null==o||null==o.payload||null==o.payload.page?null:o.payload.page.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o||(null==o?null:o.isLoading)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==o?null:o.hasFailed)&&(!(null!=o&&o.errorMessage)||400!=(null==o?null:o.statusCode))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==(null==o||null==o.payload||null==o.payload.page?null:o.payload.page.length)||400==(null==o?null:o.statusCode))}}let z=(()=>{class i{constructor(o,p,l,L,G,N){this.router=o,this.searchConfigService=p,this.externalSourceService=l,this.modalService=L,this.selectableListService=G,this.paginationService=N,this.importedObject=new e.EventEmitter,this.initialPagination=Object.assign(new O.r,{id:"spc",pageSize:5}),this.subs=[]}ngOnInit(){this.externalSource.entityTypes.pipe((0,T.hC)(),(0,c.U)(o=>o.hasSucceeded&&o.payload.totalElements>0?o.payload.page[0]:null)).subscribe(o=>{this.relatedEntityType=o}),this.resetRoute(),this.entriesRD$=this.searchConfigService.paginatedSearchOptions.pipe((0,u.w)(o=>(""===o.query&&(o.query=this.query),this.externalSourceService.getExternalSourceEntries(this.externalSource.id,o).pipe((0,D.O)(void 0))))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination),this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}import(o){this.modalRef=this.modalService.open(I.a,{size:"lg",container:"ds-dynamic-lookup-relation-modal"});const p=this.modalRef.componentInstance.compRef$.pipe((0,f.tz)(),(0,c.U)(l=>l.instance));this.subs.push(p.subscribe(l=>{l.externalSourceEntry=o,l.item=this.item,l.relationship=this.relationship,l.label=this.label,l.relatedEntityType=this.relatedEntityType})),this.subs.push(p.pipe((0,u.w)(l=>l.importedObject)).subscribe(l=>{this.selectableListService.selectSingle(this.listId,l),this.importedObject.emit(l)}))}ngOnDestroy(){this.subs.filter(o=>(0,f.Uh)(o)).forEach(o=>o.unsubscribe())}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}return i.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(S.F0),e.\u0275\u0275directiveInject(m.U),e.\u0275\u0275directiveInject(g.G),e.\u0275\u0275directiveInject(b.FF),e.\u0275\u0275directiveInject(P.w),e.\u0275\u0275directiveInject(M.N))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-dynamic-lookup-relation-external-source-tab"]],inputs:{label:"label",listId:"listId",item:"item",collection:"collection",relationship:"relationship",context:"context",query:"query",repeatable:"repeatable",externalSource:"externalSource"},outputs:{importedObject:"importedObject"},features:[e.\u0275\u0275ProvidersFeature([{provide:s.SEARCH_CONFIG_SERVICE,useClass:m.U}])],decls:16,vars:16,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[3,"query","inPlaceSearch","searchPlaceholder"],[4,"ngVar"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"]],template:function(o,p){if(1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"ds-page-size-selector"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",2),e.\u0275\u0275element(7,"ds-themed-search-form",3),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementStart(10,"div")(11,"h3"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,$,5,4,"ng-container",4),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementEnd()()()),2&o){let l;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,"submission.sections.describe.relationship-lookup.selection-tab.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275property("query",null==(l=e.\u0275\u0275pipeBind1(8,8,p.searchConfigService.paginatedSearchOptions))?null:l.query)("inPlaceSearch",!0)("searchPlaceholder",e.\u0275\u0275pipeBind1(9,10,"submission.sections.describe.relationship-lookup.selection-tab.search-form.placeholder")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,12,"submission.sections.describe.relationship-lookup.selection-tab.title."+p.externalSource.id)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(15,14,p.entriesRD$))}},dependencies:[x.O5,r.q,_.Z,a.c,d.p,y.k,R.g,x.Ov,A.X$],data:{animation:[v.Ji,v.Ic]}}),i})()},83154:(C,h,n)=>{"use strict";n.d(h,{a:()=>t});var e=n(4682),s=n(98678);function m(c,u){}const g=["*"];let t=(()=>{class c extends e.F{getComponentName(){return"ExternalSourceEntryImportModalComponent"}importThemedComponent(D){return n(41562)(`./${D}/app/shared/form/builder/ds-dynamic-form-ui/relation-lookup-modal/external-source-tab/external-source-entry-import-modal/external-source-entry-import-modal.component`)}importUnthemedComponent(){return n.e(4686).then(n.bind(n,14686))}}return c.\u0275fac=function(){let u;return function(v){return(u||(u=s.\u0275\u0275getInheritedFactory(c)))(v||c)}}(),c.\u0275cmp=s.\u0275\u0275defineComponent({type:c,selectors:[["ds-themed-external-source-entry-import-modal"]],features:[s.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:g,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(D,v){1&D&&(s.\u0275\u0275projectionDef(),s.\u0275\u0275template(0,m,0,0,"ng-template",null,0,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275elementStart(2,"div",null,1),s.\u0275\u0275projection(4),s.\u0275\u0275elementEnd())},encapsulation:2}),c})()},78927:(C,h,n)=>{"use strict";n.r(h),n.d(h,{DsDynamicLookupRelationExternalSourceTabComponent:()=>x});var e=n(59966),s=n(55963),m=n(27496),g=n(58106),t=n(98678),c=n(35103),u=n(64719),D=n(87657),v=n(12955),O=n(51864),I=n(42988),f=n(41966),P=n(96342);const B=function(r,_){return{repeatable:r,listId:_}};function U(r,_){if(1&r){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ds-viewable-collection",8),t.\u0275\u0275listener("importObject",function(y){t.\u0275\u0275restoreView(a);const R=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(R.import(y))}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275elementEnd()}if(2&r){const a=t.\u0275\u0275nextContext().ngVar,d=t.\u0275\u0275nextContext();t.\u0275\u0275property("@fadeIn",void 0)("objects",a)("selectionConfig",t.\u0275\u0275pureFunction2(10,B,d.repeatable,d.listId))("config",t.\u0275\u0275pipeBind1(1,8,d.currentPagination$))("hideGear",!0)("context",d.context)("importable",!0)("importConfig",d.importConfig)}}function M(r,_){1&r&&(t.\u0275\u0275element(0,"ds-themed-loading",9),t.\u0275\u0275pipe(1,"translate")),2&r&&t.\u0275\u0275propertyInterpolate("message",t.\u0275\u0275pipeBind1(1,1,"loading.search-results"))}function T(r,_){1&r&&(t.\u0275\u0275element(0,"ds-error",9),t.\u0275\u0275pipe(1,"translate")),2&r&&t.\u0275\u0275propertyInterpolate("message",t.\u0275\u0275pipeBind1(1,1,"error.search-results"))}function S(r,_){1&r&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"search.results.empty")," "))}function b(r,_){if(1&r&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,U,2,13,"ds-viewable-collection",5),t.\u0275\u0275template(2,M,2,3,"ds-themed-loading",6),t.\u0275\u0275template(3,T,2,3,"ds-error",6),t.\u0275\u0275template(4,S,3,3,"div",7),t.\u0275\u0275elementContainerEnd()),2&r){const a=_.ngVar;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==a?null:a.hasSucceeded)&&!(null!=a&&a.isLoading)&&(null==a||null==a.payload||null==a.payload.page?null:a.payload.page.length)>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!a||(null==a?null:a.isLoading)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==a?null:a.hasFailed)&&(!(null!=a&&a.errorMessage)||400!=(null==a?null:a.statusCode))),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0==(null==a||null==a.payload||null==a.payload.page?null:a.payload.page.length)||400==(null==a?null:a.statusCode))}}let x=(()=>{class r extends e.DsDynamicLookupRelationExternalSourceTabComponent{}return r.\u0275fac=function(){let _;return function(d){return(_||(_=t.\u0275\u0275getInheritedFactory(r)))(d||r)}}(),r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ds-dynamic-lookup-relation-external-source-tab"]],features:[t.\u0275\u0275ProvidersFeature([{provide:s.SEARCH_CONFIG_SERVICE,useClass:m.U}]),t.\u0275\u0275InheritDefinitionFeature],decls:16,vars:16,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[3,"query","inPlaceSearch","searchPlaceholder"],[4,"ngVar"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"]],template:function(a,d){if(1&a&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"ds-page-size-selector"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",2),t.\u0275\u0275element(7,"ds-themed-search-form",3),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementStart(10,"div")(11,"h3"),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(14,b,5,4,"ng-container",4),t.\u0275\u0275pipe(15,"async"),t.\u0275\u0275elementEnd()()()),2&a){let y;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,6,"submission.sections.describe.relationship-lookup.selection-tab.settings")),t.\u0275\u0275advance(4),t.\u0275\u0275property("query",null==(y=t.\u0275\u0275pipeBind1(8,8,d.searchConfigService.paginatedSearchOptions))?null:y.query)("inPlaceSearch",!0)("searchPlaceholder",t.\u0275\u0275pipeBind1(9,10,"submission.sections.describe.relationship-lookup.selection-tab.search-form.placeholder")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(13,12,"submission.sections.describe.relationship-lookup.selection-tab.title."+d.externalSource.id)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngVar",t.\u0275\u0275pipeBind1(15,14,d.entriesRD$))}},dependencies:[c.O5,u.q,D.Z,v.c,O.p,I.k,f.g,c.Ov,P.X$],data:{animation:[g.Ji,g.Ic]}}),r})()},41562:(C,h,n)=>{var e={"./custom/app/shared/form/builder/ds-dynamic-form-ui/relation-lookup-modal/external-source-tab/external-source-entry-import-modal/external-source-entry-import-modal.component":[15915,4686,8592,5915]};function s(m){if(!n.o(e,m))return Promise.resolve().then(()=>{var c=new Error("Cannot find module '"+m+"'");throw c.code="MODULE_NOT_FOUND",c});var g=e[m],t=g[0];return Promise.all(g.slice(1).map(n.e)).then(()=>n(t))}s.keys=()=>Object.keys(e),s.id=41562,C.exports=s}}]);