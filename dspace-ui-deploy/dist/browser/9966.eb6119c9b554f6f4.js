(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[9966],{59966:(h,m,n)=>{"use strict";n.r(m),n.d(m,{DsDynamicLookupRelationExternalSourceTabComponent:()=>V});var e=n(98678),r=n(55963),c=n(27496),_=n(74304),l=(n(75606),n(48358)),p=n(21160),d=n(9302),u=n(58106),C=n(45180),y=n(83154),D=n(45608),O=n(91416),f=(n(13005),n(5378),n(81323)),x=n(10572),P=n(67522),I=n(65706),v=n(35103),M=n(64719),S=n(87657),T=n(12955),b=n(51864),R=n(42988),L=n(41966),B=n(96342);const U=function(o,s){return{repeatable:o,listId:s}};function A(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-viewable-collection",8),e.\u0275\u0275listener("importObject",function(a){e.\u0275\u0275restoreView(t);const g=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(g.import(a))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext().ngVar,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("@fadeIn",void 0)("objects",t)("selectionConfig",e.\u0275\u0275pureFunction2(10,U,i.repeatable,i.listId))("config",e.\u0275\u0275pipeBind1(1,8,i.currentPagination$))("hideGear",!0)("context",i.context)("importable",!0)("importConfig",i.importConfig)}}function K(o,s){1&o&&(e.\u0275\u0275element(0,"ds-themed-loading",9),e.\u0275\u0275pipe(1,"translate")),2&o&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"loading.search-results"))}function W(o,s){1&o&&(e.\u0275\u0275element(0,"ds-error",9),e.\u0275\u0275pipe(1,"translate")),2&o&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"error.search-results"))}function j(o,s){1&o&&(e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"search.results.empty")," "))}function F(o,s){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,A,2,13,"ds-viewable-collection",5),e.\u0275\u0275template(2,K,2,3,"ds-themed-loading",6),e.\u0275\u0275template(3,W,2,3,"ds-error",6),e.\u0275\u0275template(4,j,3,3,"div",7),e.\u0275\u0275elementContainerEnd()),2&o){const t=s.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t?null:t.hasSucceeded)&&!(null!=t&&t.isLoading)&&(null==t||null==t.payload||null==t.payload.page?null:t.payload.page.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t||(null==t?null:t.isLoading)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t?null:t.hasFailed)&&(!(null!=t&&t.errorMessage)||400!=(null==t?null:t.statusCode))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==(null==t||null==t.payload||null==t.payload.page?null:t.payload.page.length)||400==(null==t?null:t.statusCode))}}let V=(()=>{class o{constructor(t,i,a,g,$,z){this.router=t,this.searchConfigService=i,this.externalSourceService=a,this.modalService=g,this.selectableListService=$,this.paginationService=z,this.importedObject=new e.EventEmitter,this.initialPagination=Object.assign(new C.r,{id:"spc",pageSize:5}),this.subs=[]}ngOnInit(){this.externalSource.entityTypes.pipe((0,x.hC)(),(0,l.U)(t=>t.hasSucceeded&&t.payload.totalElements>0?t.payload.page[0]:null)).subscribe(t=>{this.relatedEntityType=t}),this.resetRoute(),this.entriesRD$=this.searchConfigService.paginatedSearchOptions.pipe((0,p.w)(t=>(""===t.query&&(t.query=this.query),this.externalSourceService.getExternalSourceEntries(this.externalSource.id,t).pipe((0,d.O)(void 0))))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination),this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}import(t){this.modalRef=this.modalService.open(y.a,{size:"lg",container:"ds-dynamic-lookup-relation-modal"});const i=this.modalRef.componentInstance.compRef$.pipe((0,D.tz)(),(0,l.U)(a=>a.instance));this.subs.push(i.subscribe(a=>{a.externalSourceEntry=t,a.item=this.item,a.relationship=this.relationship,a.label=this.label,a.relatedEntityType=this.relatedEntityType})),this.subs.push(i.pipe((0,p.w)(a=>a.importedObject)).subscribe(a=>{this.selectableListService.selectSingle(this.listId,a),this.importedObject.emit(a)}))}ngOnDestroy(){this.subs.filter(t=>(0,D.Uh)(t)).forEach(t=>t.unsubscribe())}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(P.F0),e.\u0275\u0275directiveInject(c.U),e.\u0275\u0275directiveInject(_.G),e.\u0275\u0275directiveInject(I.FF),e.\u0275\u0275directiveInject(O.w),e.\u0275\u0275directiveInject(f.N))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["ds-dynamic-lookup-relation-external-source-tab"]],inputs:{label:"label",listId:"listId",item:"item",collection:"collection",relationship:"relationship",context:"context",query:"query",repeatable:"repeatable",externalSource:"externalSource"},outputs:{importedObject:"importedObject"},features:[e.\u0275\u0275ProvidersFeature([{provide:r.SEARCH_CONFIG_SERVICE,useClass:c.U}])],decls:16,vars:16,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[3,"query","inPlaceSearch","searchPlaceholder"],[4,"ngVar"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"ds-page-size-selector"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",2),e.\u0275\u0275element(7,"ds-themed-search-form",3),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementStart(10,"div")(11,"h3"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,F,5,4,"ng-container",4),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementEnd()()()),2&t){let a;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,"submission.sections.describe.relationship-lookup.selection-tab.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275property("query",null==(a=e.\u0275\u0275pipeBind1(8,8,i.searchConfigService.paginatedSearchOptions))?null:a.query)("inPlaceSearch",!0)("searchPlaceholder",e.\u0275\u0275pipeBind1(9,10,"submission.sections.describe.relationship-lookup.selection-tab.search-form.placeholder")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,12,"submission.sections.describe.relationship-lookup.selection-tab.title."+i.externalSource.id)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(15,14,i.entriesRD$))}},dependencies:[v.O5,M.q,S.Z,T.c,b.p,R.k,L.g,v.Ov,B.X$],data:{animation:[u.Ji,u.Ic]}}),o})()},83154:(h,m,n)=>{"use strict";n.d(m,{a:()=>E});var e=n(4682),r=n(98678);function c(l,p){}const _=["*"];let E=(()=>{class l extends e.F{getComponentName(){return"ExternalSourceEntryImportModalComponent"}importThemedComponent(d){return n(41562)(`./${d}/app/shared/form/builder/ds-dynamic-form-ui/relation-lookup-modal/external-source-tab/external-source-entry-import-modal/external-source-entry-import-modal.component`)}importUnthemedComponent(){return n.e(4686).then(n.bind(n,14686))}}return l.\u0275fac=function(){let p;return function(u){return(p||(p=r.\u0275\u0275getInheritedFactory(l)))(u||l)}}(),l.\u0275cmp=r.\u0275\u0275defineComponent({type:l,selectors:[["ds-themed-external-source-entry-import-modal"]],features:[r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:_,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(d,u){1&d&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275template(0,c,0,0,"ng-template",null,0,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementStart(2,"div",null,1),r.\u0275\u0275projection(4),r.\u0275\u0275elementEnd())},encapsulation:2}),l})()},41562:(h,m,n)=>{var e={"./custom/app/shared/form/builder/ds-dynamic-form-ui/relation-lookup-modal/external-source-tab/external-source-entry-import-modal/external-source-entry-import-modal.component":[15915,4686,8592,5915]};function r(c){if(!n.o(e,c))return Promise.resolve().then(()=>{var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l});var _=e[c],E=_[0];return Promise.all(_.slice(1).map(n.e)).then(()=>n(E))}r.keys=()=>Object.keys(e),r.id=41562,h.exports=r}}]);