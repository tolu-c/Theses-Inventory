var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=3590,exports.ids=[3590],exports.modules={64799:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>ItemRequestDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(96846),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20018),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(54781),_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(53829),_request_models__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10289),_request_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(91751),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(59501),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(54174),_angular_common_http__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8280),_shared_request_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(92378),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(98937),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(86209);class ItemRequestDataService extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_6__.t{constructor(requestService,rdbService,objectCache,halService){super("itemrequests",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}getItemRequestEndpoint(){return this.halService.getEndpoint(this.linkPath)}getItemRequestEndpointByToken(token){return this.halService.getEndpoint(this.linkPath).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.hX)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.UE)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.UI)(href=>`${href}/${token}`))}requestACopy(itemRequest){const requestId=this.requestService.generateRequestId();return this.getItemRequestEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.sE)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Uh)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.UI)(href=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_3__.xo(requestId,href,itemRequest);this.requestService.send(request)})).subscribe(),this.rdbService.buildFromRequestUUID(requestId).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_2__.hC)())}deny(token,email){return this.process(token,email,!1)}grant(token,email,suggestOpenAccess=!1){return this.process(token,email,!0,suggestOpenAccess)}process(token,email,grant,suggestOpenAccess=!1){const requestId=this.requestService.generateRequestId();return this.getItemRequestEndpointByToken(token).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.xb)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.UI)(endpointURL=>{const options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM;return headers=headers.append("Content-Type","application/json"),options.headers=headers,new _request_models__WEBPACK_IMPORTED_MODULE_3__.an(requestId,endpointURL,JSON.stringify({acceptRequest:grant,responseMessage:email.message,subject:email.subject,suggestOpenAccess}),options)}),(0,_shared_request_operators__WEBPACK_IMPORTED_MODULE_10__.wG)(this.requestService)).subscribe(),this.rdbService.buildFromRequestUUID(requestId)}}__name(ItemRequestDataService,"ItemRequestDataService"),ItemRequestDataService.\u0275fac=__name(function(t){return new(t||ItemRequestDataService)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.LFG(_request_service__WEBPACK_IMPORTED_MODULE_4__.s),_angular_core__WEBPACK_IMPORTED_MODULE_11__.LFG(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.Q),_angular_core__WEBPACK_IMPORTED_MODULE_11__.LFG(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_11__.LFG(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_1__.q))},"ItemRequestDataService_Factory"),ItemRequestDataService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_11__.Yz7({token:ItemRequestDataService,factory:ItemRequestDataService.\u0275fac,providedIn:"root"})},63590:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RequestCopyModule:()=>RequestCopyModule});var common=__webpack_require__(65159),shared_module=__webpack_require__(47013),router=__webpack_require__(16088),item_request_data_service=__webpack_require__(64799),operators=__webpack_require__(53829),core=__webpack_require__(86209);class RequestCopyResolver{constructor(itemRequestDataService){this.itemRequestDataService=itemRequestDataService}resolve(route,state){return this.itemRequestDataService.findById(route.params.token).pipe((0,operators.hC)())}}__name(RequestCopyResolver,"RequestCopyResolver"),RequestCopyResolver.\u0275fac=__name(function(t){return new(t||RequestCopyResolver)(core.LFG(item_request_data_service.a))},"RequestCopyResolver_Factory"),RequestCopyResolver.\u0275prov=core.Yz7({token:RequestCopyResolver,factory:RequestCopyResolver.\u0275fac});var cjs_operators=__webpack_require__(96846),auth_service=__webpack_require__(22410),url_combiner=__webpack_require__(64526),app_routing_paths=__webpack_require__(22877);function getRequestCopyRoute(token){return new url_combiner.R((0,app_routing_paths.vv)(),token).toString()}__name(getRequestCopyRoute,"getRequestCopyRoute");const REQUEST_COPY_DENY_PATH="deny";function getRequestCopyDenyRoute(token){return new url_combiner.R(getRequestCopyRoute(token),REQUEST_COPY_DENY_PATH).toString()}__name(getRequestCopyDenyRoute,"getRequestCopyDenyRoute");const REQUEST_COPY_GRANT_PATH="grant";function getRequestCopyGrantRoute(token){return new url_combiner.R(getRequestCopyRoute(token),REQUEST_COPY_GRANT_PATH).toString()}__name(getRequestCopyGrantRoute,"getRequestCopyGrantRoute");var item_data_service=__webpack_require__(22476),dso_name_service=__webpack_require__(17306),item_page_routing_paths=__webpack_require__(50306),authorized_operators=__webpack_require__(80815),themed_loading_component=__webpack_require__(24442),var_directive=__webpack_require__(61562),ngx_translate_core=__webpack_require__(4330);const _c0=__name(function(a0,a1){return{url:a0,name:a1}},"_c0");function GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core._UZ(1,"p",5),core.ALo(2,"translate"),core.ALo(3,"async"),core.ALo(4,"async"),core.TgZ(5,"p"),core._uU(6),core.ALo(7,"translate"),core.qZA(),core.TgZ(8,"div",6)(9,"a",7),core.ALo(10,"async"),core.ALo(11,"translate"),core._uU(12),core.ALo(13,"translate"),core.qZA(),core.TgZ(14,"a",8),core.ALo(15,"async"),core.ALo(16,"translate"),core._uU(17),core.ALo(18,"translate"),core.qZA()()()),2&rf){const ctx_r4=core.oxw(3);core.xp6(1),core.Q6J("innerHTML",core.xi3(2,8,"grant-deny-request-copy.intro1",core.WLB(29,_c0,core.lcZ(3,11,ctx_r4.itemUrl$),core.lcZ(4,13,ctx_r4.itemName$))),core.oJD),core.xp6(5),core.Oqu(core.lcZ(7,15,"grant-deny-request-copy.intro2")),core.xp6(3),core.s9C("title",core.lcZ(11,19,"grant-deny-request-copy.grant")),core.Q6J("routerLink",core.lcZ(10,17,ctx_r4.grantRoute$)),core.xp6(3),core.hij(" ",core.lcZ(13,21,"grant-deny-request-copy.grant")," "),core.xp6(2),core.s9C("title",core.lcZ(16,25,"grant-deny-request-copy.deny")),core.Q6J("routerLink",core.lcZ(15,23,ctx_r4.denyRoute$)),core.xp6(3),core.hij(" ",core.lcZ(18,27,"grant-deny-request-copy.deny")," ")}}function GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",9)(1,"p"),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"p",10)(5,"a",11),core._uU(6),core.ALo(7,"translate"),core.qZA()()()),2&rf&&(core.xp6(2),core.Oqu(core.lcZ(3,2,"grant-deny-request-copy.processed")),core.xp6(4),core.Oqu(core.lcZ(7,4,"grant-deny-request-copy.home-page")))}function GrantDenyRequestCopyComponent_div_0_div_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core.YNc(1,GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template,19,32,"div",3),core.YNc(2,GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template,8,6,"div",4),core.qZA()),2&rf){const itemRequestRD_r1=core.oxw().ngVar;core.xp6(1),core.Q6J("ngIf",!itemRequestRD_r1.payload.decisionDate),core.xp6(1),core.Q6J("ngIf",itemRequestRD_r1.payload.decisionDate)}}function GrantDenyRequestCopyComponent_div_0_ds_themed_loading_5_Template(rf,ctx){1&rf&&core._UZ(0,"ds-themed-loading")}function GrantDenyRequestCopyComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1)(1,"h3",2),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.YNc(4,GrantDenyRequestCopyComponent_div_0_div_4_Template,3,2,"div",3),core.YNc(5,GrantDenyRequestCopyComponent_div_0_ds_themed_loading_5_Template,1,0,"ds-themed-loading",3),core.qZA()),2&rf){const itemRequestRD_r1=ctx.ngVar;core.xp6(2),core.Oqu(core.lcZ(3,3,"grant-deny-request-copy.header")),core.xp6(2),core.Q6J("ngIf",itemRequestRD_r1&&itemRequestRD_r1.hasSucceeded),core.xp6(1),core.Q6J("ngIf",!itemRequestRD_r1||(null==itemRequestRD_r1?null:itemRequestRD_r1.isLoading))}}__name(GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template,"GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template"),__name(GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template,"GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template"),__name(GrantDenyRequestCopyComponent_div_0_div_4_Template,"GrantDenyRequestCopyComponent_div_0_div_4_Template"),__name(GrantDenyRequestCopyComponent_div_0_ds_themed_loading_5_Template,"GrantDenyRequestCopyComponent_div_0_ds_themed_loading_5_Template"),__name(GrantDenyRequestCopyComponent_div_0_Template,"GrantDenyRequestCopyComponent_div_0_Template");class GrantDenyRequestCopyComponent{constructor(router2,route,authService,itemDataService,nameService){this.router=router2,this.route=route,this.authService=authService,this.itemDataService=itemDataService,this.nameService=nameService}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,cjs_operators.UI)(data=>data.request),(0,operators.hC)(),(0,authorized_operators.Gh)(this.router,this.authService)),this.itemRD$=this.itemRequestRD$.pipe((0,operators.Gp)(),(0,cjs_operators.wt)(itemRequest=>this.itemDataService.findById(itemRequest.itemId))),this.itemName$=this.itemRD$.pipe((0,operators.Gp)(),(0,cjs_operators.UI)(item=>this.nameService.getName(item))),this.itemUrl$=this.itemRD$.pipe((0,operators.Gp)(),(0,cjs_operators.UI)(item=>(0,item_page_routing_paths.Tt)(item))),this.denyRoute$=this.itemRequestRD$.pipe((0,operators.Gp)(),(0,cjs_operators.UI)(itemRequest=>getRequestCopyDenyRoute(itemRequest.token))),this.grantRoute$=this.itemRequestRD$.pipe((0,operators.Gp)(),(0,cjs_operators.UI)(itemRequest=>getRequestCopyGrantRoute(itemRequest.token)))}}__name(GrantDenyRequestCopyComponent,"GrantDenyRequestCopyComponent"),GrantDenyRequestCopyComponent.\u0275fac=__name(function(t){return new(t||GrantDenyRequestCopyComponent)(core.Y36(router.F0),core.Y36(router.gz),core.Y36(auth_service.e8),core.Y36(item_data_service.S),core.Y36(dso_name_service._))},"GrantDenyRequestCopyComponent_Factory"),GrantDenyRequestCopyComponent.\u0275cmp=core.Xpm({type:GrantDenyRequestCopyComponent,selectors:[["ds-grant-deny-request-copy"]],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],["class","processed-message",4,"ngIf"],[3,"innerHTML"],[1,"btn-group"],[1,"btn","btn-outline-primary",3,"routerLink","title"],[1,"btn","btn-outline-danger",3,"routerLink","title"],[1,"processed-message"],[1,"text-center"],["routerLink","/home",1,"btn","btn-primary"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,GrantDenyRequestCopyComponent_div_0_Template,6,5,"div",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngVar",core.lcZ(1,1,ctx.itemRequestRD$))},"GrantDenyRequestCopyComponent_Template"),dependencies:[common.O5,router.rH,themed_loading_component.Z,var_directive.g,common.Ov,ngx_translate_core.X$]});var themed_component=__webpack_require__(56787);function ThemedDenyRequestCopyComponent_ng_template_0_Template(rf,ctx){}__name(ThemedDenyRequestCopyComponent_ng_template_0_Template,"ThemedDenyRequestCopyComponent_ng_template_0_Template");class ThemedDenyRequestCopyComponent extends themed_component.F{getComponentName(){return"DenyRequestCopyComponent"}importThemedComponent(themeName){return __webpack_require__(8141)(`./${themeName}/app/request-copy/deny-request-copy/deny-request-copy.component`)}importUnthemedComponent(){return __webpack_require__.e(3892).then(__webpack_require__.bind(__webpack_require__,77066))}}function ThemedGrantRequestCopyComponent_ng_template_0_Template(rf,ctx){}__name(ThemedDenyRequestCopyComponent,"ThemedDenyRequestCopyComponent"),ThemedDenyRequestCopyComponent.\u0275fac=function(){let \u0275ThemedDenyRequestCopyComponent_BaseFactory;return __name(function(t){return(\u0275ThemedDenyRequestCopyComponent_BaseFactory||(\u0275ThemedDenyRequestCopyComponent_BaseFactory=core.n5z(ThemedDenyRequestCopyComponent)))(t||ThemedDenyRequestCopyComponent)},"ThemedDenyRequestCopyComponent_Factory")}(),ThemedDenyRequestCopyComponent.\u0275cmp=core.Xpm({type:ThemedDenyRequestCopyComponent,selectors:[["ds-themed-deny-request-copy"]],features:[core.qOj],ngContentSelectors:["*"],decls:5,vars:0,consts:[["vcr",""],["content",""]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.YNc(0,ThemedDenyRequestCopyComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.W1O),core.TgZ(2,"div",null,1),core.Hsn(4),core.qZA())},"ThemedDenyRequestCopyComponent_Template"),encapsulation:2}),__name(ThemedGrantRequestCopyComponent_ng_template_0_Template,"ThemedGrantRequestCopyComponent_ng_template_0_Template");class ThemedGrantRequestCopyComponent extends themed_component.F{getComponentName(){return"GrantRequestCopyComponent"}importThemedComponent(themeName){return __webpack_require__(17156)(`./${themeName}/app/request-copy/grant-request-copy/grant-request-copy.component`)}importUnthemedComponent(){return __webpack_require__.e(8167).then(__webpack_require__.bind(__webpack_require__,18167))}}__name(ThemedGrantRequestCopyComponent,"ThemedGrantRequestCopyComponent"),ThemedGrantRequestCopyComponent.\u0275fac=function(){let \u0275ThemedGrantRequestCopyComponent_BaseFactory;return __name(function(t){return(\u0275ThemedGrantRequestCopyComponent_BaseFactory||(\u0275ThemedGrantRequestCopyComponent_BaseFactory=core.n5z(ThemedGrantRequestCopyComponent)))(t||ThemedGrantRequestCopyComponent)},"ThemedGrantRequestCopyComponent_Factory")}(),ThemedGrantRequestCopyComponent.\u0275cmp=core.Xpm({type:ThemedGrantRequestCopyComponent,selectors:[["ds-themed-grant-request-copy"]],features:[core.qOj],ngContentSelectors:["*"],decls:5,vars:0,consts:[["vcr",""],["content",""]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.YNc(0,ThemedGrantRequestCopyComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.W1O),core.TgZ(2,"div",null,1),core.Hsn(4),core.qZA())},"ThemedGrantRequestCopyComponent_Template"),encapsulation:2});class RequestCopyRoutingModule{}__name(RequestCopyRoutingModule,"RequestCopyRoutingModule"),RequestCopyRoutingModule.\u0275fac=__name(function(t){return new(t||RequestCopyRoutingModule)},"RequestCopyRoutingModule_Factory"),RequestCopyRoutingModule.\u0275mod=core.oAB({type:RequestCopyRoutingModule}),RequestCopyRoutingModule.\u0275inj=core.cJS({providers:[RequestCopyResolver,GrantDenyRequestCopyComponent],imports:[router.Bz.forChild([{path:":token",resolve:{request:RequestCopyResolver},children:[{path:"",component:GrantDenyRequestCopyComponent},{path:REQUEST_COPY_DENY_PATH,component:ThemedDenyRequestCopyComponent},{path:REQUEST_COPY_GRANT_PATH,component:ThemedGrantRequestCopyComponent}]}])]});class RequestCopyModule{}__name(RequestCopyModule,"RequestCopyModule"),RequestCopyModule.\u0275fac=__name(function(t){return new(t||RequestCopyModule)},"RequestCopyModule_Factory"),RequestCopyModule.\u0275mod=core.oAB({type:RequestCopyModule}),RequestCopyModule.\u0275inj=core.cJS({imports:[common.ez,shared_module.m,RequestCopyRoutingModule]})},8141:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/request-copy/deny-request-copy/deny-request-copy.component":[62761,2761]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}__name(webpackAsyncContext,"webpackAsyncContext"),webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=8141,module.exports=webpackAsyncContext},17156:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/request-copy/grant-request-copy/grant-request-copy.component":[61629,1629]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}__name(webpackAsyncContext,"webpackAsyncContext"),webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=17156,module.exports=webpackAsyncContext}};