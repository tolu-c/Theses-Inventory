var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=3892,exports.ids=[3892],exports.modules={77066:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DenyRequestCopyComponent:()=>DenyRequestCopyComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(96846),_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(53829),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(22410),rxjs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(93489),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22476),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(17306),_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(59501),_core_data_item_request_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(64799),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(39373),_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(80815),_angular_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(86209),_angular_router__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(16088),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(4330),_angular_common__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(65159),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(24442),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(61562),_email_request_copy_themed_email_request_copy_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(96034);function DenyRequestCopyComponent_div_0_div_4_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_10__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_10__.TgZ(0,"div")(1,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_10__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.TgZ(4,"ds-themed-email-request-copy",4),_angular_core__WEBPACK_IMPORTED_MODULE_10__.NdJ("send",__name(function($event){_angular_core__WEBPACK_IMPORTED_MODULE_10__.CHM(_r5);const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_10__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_10__.KtG(ctx_r4.deny($event))},"DenyRequestCopyComponent_div_0_div_4_Template_ds_themed_email_request_copy_send_4_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_10__.ALo(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.ALo(6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.qZA()()}if(2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_10__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_10__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_10__.lcZ(3,3,"deny-request-copy.intro")),_angular_core__WEBPACK_IMPORTED_MODULE_10__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Q6J("subject",_angular_core__WEBPACK_IMPORTED_MODULE_10__.lcZ(5,5,ctx_r2.subject$))("message",_angular_core__WEBPACK_IMPORTED_MODULE_10__.lcZ(6,7,ctx_r2.message$))}}function DenyRequestCopyComponent_div_0_ds_themed_loading_5_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_10__._UZ(0,"ds-themed-loading")}function DenyRequestCopyComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.TgZ(0,"div",1)(1,"h3",2),_angular_core__WEBPACK_IMPORTED_MODULE_10__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.YNc(4,DenyRequestCopyComponent_div_0_div_4_Template,7,9,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.YNc(5,DenyRequestCopyComponent_div_0_ds_themed_loading_5_Template,1,0,"ds-themed-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.qZA()),2&rf){const itemRequestRD_r1=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_10__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_10__.lcZ(3,3,"deny-request-copy.header")),_angular_core__WEBPACK_IMPORTED_MODULE_10__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Q6J("ngIf",itemRequestRD_r1&&itemRequestRD_r1.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_10__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Q6J("ngIf",!itemRequestRD_r1||(null==itemRequestRD_r1?null:itemRequestRD_r1.isLoading))}}__name(DenyRequestCopyComponent_div_0_div_4_Template,"DenyRequestCopyComponent_div_0_div_4_Template"),__name(DenyRequestCopyComponent_div_0_ds_themed_loading_5_Template,"DenyRequestCopyComponent_div_0_ds_themed_loading_5_Template"),__name(DenyRequestCopyComponent_div_0_Template,"DenyRequestCopyComponent_div_0_Template");class DenyRequestCopyComponent{constructor(router,route,authService,translateService,itemDataService,nameService,itemRequestService,notificationsService){this.router=router,this.route=route,this.authService=authService,this.translateService=translateService,this.itemDataService=itemDataService,this.nameService=nameService,this.itemRequestService=itemRequestService,this.notificationsService=notificationsService}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.UI)(data=>data.request),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__.hC)(),(0,_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_6__.Gh)(this.router,this.authService));const msgParams$=(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([this.itemRequestRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__.Gp)()),this.authService.getAuthenticatedUserFromStore()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.wt)(([itemRequest,user])=>this.itemDataService.findById(itemRequest.itemId).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__.Gp)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.UI)(item=>{const uri=item.firstMetadataValue("dc.identifier.uri");return Object.assign({recipientName:itemRequest.requestName,itemUrl:(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__.UE)(uri)?uri:item.handle,itemName:this.nameService.getName(item),authorName:this.nameService.getName(user),authorEmail:user.email})}))));this.subject$=this.translateService.get("deny-request-copy.email.subject"),this.message$=msgParams$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.wt)(params=>this.translateService.get("deny-request-copy.email.message",params)))}deny(email){this.itemRequestRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__.Gp)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.wt)(itemRequest=>this.itemRequestService.deny(itemRequest.token,email)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__.hC)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("deny-request-copy.success")),this.router.navigateByUrl("/")):this.notificationsService.error(this.translateService.get("deny-request-copy.error"),rd.errorMessage)})}}__name(DenyRequestCopyComponent,"DenyRequestCopyComponent"),DenyRequestCopyComponent.\u0275fac=__name(function(t){return new(t||DenyRequestCopyComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_14__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_14__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__.e8),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__.sK),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__.S),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_3__._),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_core_data_item_request_data_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.T))},"DenyRequestCopyComponent_Factory"),DenyRequestCopyComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_10__.Xpm({type:DenyRequestCopyComponent,selectors:[["ds-deny-request-copy"]],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],[3,"subject","message","send"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.YNc(0,DenyRequestCopyComponent_div_0_Template,6,5,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_10__.ALo(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_10__.Q6J("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_10__.lcZ(1,1,ctx.itemRequestRD$))},"DenyRequestCopyComponent_Template"),dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.O5,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_7__.Z,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_8__.g,_email_request_copy_themed_email_request_copy_component__WEBPACK_IMPORTED_MODULE_9__.F,_angular_common__WEBPACK_IMPORTED_MODULE_16__.Ov,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__.X$]})},96034:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>ThemedEmailRequestCopyComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86209),src_app_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(56787);function ThemedEmailRequestCopyComponent_ng_template_0_Template(rf,ctx){}__name(ThemedEmailRequestCopyComponent_ng_template_0_Template,"ThemedEmailRequestCopyComponent_ng_template_0_Template");class ThemedEmailRequestCopyComponent extends src_app_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.F{constructor(){super(...arguments),this.send=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vpe,this.inAndOutputNames=["send","subject","message"]}getComponentName(){return"EmailRequestCopyComponent"}importThemedComponent(themeName){return __webpack_require__(52772)(`./${themeName}/app/request-copy/email-request-copy/email-request-copy.component`)}importUnthemedComponent(){return __webpack_require__.e(2141).then(__webpack_require__.bind(__webpack_require__,12141))}}__name(ThemedEmailRequestCopyComponent,"ThemedEmailRequestCopyComponent"),ThemedEmailRequestCopyComponent.\u0275fac=function(){let \u0275ThemedEmailRequestCopyComponent_BaseFactory;return __name(function(t){return(\u0275ThemedEmailRequestCopyComponent_BaseFactory||(\u0275ThemedEmailRequestCopyComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(ThemedEmailRequestCopyComponent)))(t||ThemedEmailRequestCopyComponent)},"ThemedEmailRequestCopyComponent_Factory")}(),ThemedEmailRequestCopyComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xpm({type:ThemedEmailRequestCopyComponent,selectors:[["ds-themed-email-request-copy"]],inputs:{subject:"subject",message:"message"},outputs:{send:"send"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.qOj],ngContentSelectors:["*"],decls:5,vars:0,consts:[["vcr",""],["content",""]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.F$t(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.YNc(0,ThemedEmailRequestCopyComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.W1O),_angular_core__WEBPACK_IMPORTED_MODULE_1__.TgZ(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Hsn(4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.qZA())},"ThemedEmailRequestCopyComponent_Template"),encapsulation:2})},52772:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/request-copy/email-request-copy/email-request-copy.component":[95162,1632]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}__name(webpackAsyncContext,"webpackAsyncContext"),webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=52772,module.exports=webpackAsyncContext}};