"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=676,exports.ids=[676],exports.modules={41034:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>ProfilePageSecurityFormComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(86209),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(49417),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(59501),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(74708),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39373),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(96846),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(53829),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4330),_angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(65159),_angular_forms__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(32189),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(74369),_shared_form_form_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(23593);function ProfilePageSecurityFormComponent_ds_form_3_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"ds-form",4),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("formId",ctx_r0.FORM_PREFIX)("formModel",ctx_r0.formModel)("formGroup",ctx_r0.formGroup)("displaySubmit",!1)("displayCancel",!1)}}function ProfilePageSecurityFormComponent_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(2,1,ctx_r1.FORM_PREFIX+"error.matching-passwords"))}}function ProfilePageSecurityFormComponent_div_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(2,1,ctx_r2.FORM_PREFIX+"error.empty-password"))}}__name(ProfilePageSecurityFormComponent_ds_form_3_Template,"ProfilePageSecurityFormComponent_ds_form_3_Template"),__name(ProfilePageSecurityFormComponent_div_4_Template,"ProfilePageSecurityFormComponent_div_4_Template"),__name(ProfilePageSecurityFormComponent_div_5_Template,"ProfilePageSecurityFormComponent_div_5_Template");class ProfilePageSecurityFormComponent{constructor(formService,translate,epersonService,notificationsService){this.formService=formService,this.translate=translate,this.epersonService=epersonService,this.notificationsService=notificationsService,this.isInvalid=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.vpe,this.passwordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.vpe,this.currentPasswordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.vpe,this.formModel=[new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.b1u({id:"password",name:"password",inputType:"password"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.b1u({id:"passwordrepeat",name:"passwordrepeat",inputType:"password"})],this.passwordCanBeEmpty=!0,this.subs=[]}ngOnInit(){"profile.security.form."===this.FORM_PREFIX&&this.formModel.unshift(new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.b1u({id:"current-password",name:"current-password",inputType:"password",required:!0})),this.passwordCanBeEmpty?this.formGroup=this.formService.createFormGroup(this.formModel,{validators:[this.checkPasswordsEqual]}):this.formGroup=this.formService.createFormGroup(this.formModel,{validators:[this.checkPasswordsEqual,this.checkPasswordEmpty]}),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),this.subs.push(this.formGroup.statusChanges.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.ig)(300),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.UI)(status=>"VALID"!==status)).subscribe(status=>this.isInvalid.emit(status))),this.subs.push(this.formGroup.valueChanges.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.ig)(300)).subscribe(valueChange=>{this.passwordValue.emit(valueChange.password),"profile.security.form."===this.FORM_PREFIX&&this.currentPasswordValue.emit(valueChange["current-password"])}))}updateFieldTranslations(){this.formModel.forEach(fieldModel=>{fieldModel.label=this.translate.instant(this.FORM_PREFIX+"label."+fieldModel.id)})}checkPasswordsEqual(group){return group.get("password").value===group.get("passwordrepeat").value?null:{notSame:!0}}checkPasswordEmpty(group){const pass=group.get("password").value;return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.xb)(pass)?{emptyPassword:!0}:null}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Uh)(sub)).forEach(sub=>sub.unsubscribe())}}__name(ProfilePageSecurityFormComponent,"ProfilePageSecurityFormComponent"),ProfilePageSecurityFormComponent.\u0275fac=__name(function(t){return new(t||ProfilePageSecurityFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.w1X),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.sK),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__.k),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__.T))},"ProfilePageSecurityFormComponent_Factory"),ProfilePageSecurityFormComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.Xpm({type:ProfilePageSecurityFormComponent,selectors:[["ds-profile-page-security-form"]],inputs:{passwordCanBeEmpty:"passwordCanBeEmpty",FORM_PREFIX:"FORM_PREFIX"},outputs:{isInvalid:"isInvalid",passwordValue:"passwordValue",currentPasswordValue:"currentPasswordValue"},decls:6,vars:7,consts:[[1,"mb-4",3,"type"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],["id","notSame","class","container-fluid text-danger",4,"ngIf"],["id","emptyPassword","class","container-fluid text-danger",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"],["id","notSame",1,"container-fluid","text-danger"],["id","emptyPassword",1,"container-fluid","text-danger"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"ds-alert",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(3,ProfilePageSecurityFormComponent_ds_form_3_Template,1,5,"ds-form",1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(4,ProfilePageSecurityFormComponent_div_4_Template,3,3,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(5,ProfilePageSecurityFormComponent_div_5_Template,3,3,"div",3)),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(2,5,ctx.FORM_PREFIX+"info")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",ctx.formModel),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",ctx.formGroup.hasError("notSame")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",(ctx.formGroup.dirty||ctx.formGroup.touched)&&ctx.formGroup.hasError("emptyPassword")))},"ProfilePageSecurityFormComponent_Template"),dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_10__.O5,_angular_forms__WEBPACK_IMPORTED_MODULE_11__.JL,_angular_forms__WEBPACK_IMPORTED_MODULE_11__.sg,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__.w,_shared_form_form_component__WEBPACK_IMPORTED_MODULE_4__.U,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.X$],encapsulation:2})},90676:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CreateProfileComponent:()=>CreateProfileComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(96846),_angular_forms__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(32189),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(74708),_core_eperson_models_eperson_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(49060),_core_auth_auth_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(56800),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39373),_environments_environment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(91602),_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(59501),_core_end_user_agreement_end_user_agreement_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(86984),_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(53829),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(86209),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(4330),_ngrx_store__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(60857),_angular_router__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(16088),_angular_common__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(65159),_profile_page_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(41034);function CreateProfileComponent_div_0_div_25_span_1_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(2,1,"register-page.create-profile.identification.first-name.error")," "))}function CreateProfileComponent_div_0_div_25_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(1,CreateProfileComponent_div_0_div_25_span_1_Template,3,3,"span",26),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",ctx_r1.firstName.errors&&ctx_r1.firstName.errors.required)}}function CreateProfileComponent_div_0_div_32_span_1_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(2,1,"register-page.create-profile.identification.last-name.error")," "))}function CreateProfileComponent_div_0_div_32_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(1,CreateProfileComponent_div_0_div_32_span_1_Template,3,3,"span",26),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()),2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",ctx_r2.lastName.errors&&ctx_r2.lastName.errors.required)}}function CreateProfileComponent_div_0_option_46_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"option",21),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()),2&rf){const lang_r6=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("value",lang_r6.code),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(lang_r6.label)}}function CreateProfileComponent_div_0_Template(rf,ctx){if(1&rf){const _r8=_angular_core__WEBPACK_IMPORTED_MODULE_8__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"div",1)(1,"h3",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(4,"div",3)(5,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(12),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(14,"span",9),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(15),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(16,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(17,"form",10),_angular_core__WEBPACK_IMPORTED_MODULE_8__.NdJ("ngSubmit",__name(function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r8);const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_8__.KtG(ctx_r7.submitEperson())},"CreateProfileComponent_div_0_Template_form_ngSubmit_17_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(18,"div",11)(19,"div",6)(20,"div",7)(21,"label",12),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(22),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(23,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__._UZ(24,"input",13),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(25,CreateProfileComponent_div_0_div_25_Template,2,1,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(26,"div",6)(27,"div",7)(28,"label",15),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(29),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(30,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__._UZ(31,"input",16),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(32,CreateProfileComponent_div_0_div_32_Template,2,1,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(33,"div",6)(34,"div",7)(35,"label",17),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(36),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(37,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__._UZ(38,"input",18),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(39,"div",6)(40,"div",7)(41,"label",19),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(42),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(43,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(44,"select",20),_angular_core__WEBPACK_IMPORTED_MODULE_8__._UZ(45,"option",21),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(46,CreateProfileComponent_div_0_option_46_Template,2,2,"option",22),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(47,"div",3)(48,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(49),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(50,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(51,"div",5)(52,"ds-profile-page-security-form",23),_angular_core__WEBPACK_IMPORTED_MODULE_8__.NdJ("isInvalid",__name(function($event){_angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r8);const ctx_r9=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_8__.KtG(ctx_r9.setInValid($event))},"CreateProfileComponent_div_0_Template_ds_profile_page_security_form_isInvalid_52_listener"))("passwordValue",__name(function($event){_angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r8);const ctx_r10=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_8__.KtG(ctx_r10.setPasswordValue($event))},"CreateProfileComponent_div_0_Template_ds_profile_page_security_form_passwordValue_52_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(53,"div",6)(54,"div",7)(55,"button",24),_angular_core__WEBPACK_IMPORTED_MODULE_8__.NdJ("click",__name(function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r8);const ctx_r11=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_8__.KtG(ctx_r11.submitEperson())},"CreateProfileComponent_div_0_Template_button_click_55_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(56),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(57,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()()()()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(3,22,"register-page.create-profile.header")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(7,24,"register-page.create-profile.identification.header")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(13,26,"register-page.create-profile.identification.email")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(16,28,ctx_r0.registration$).email),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Tol("ng-invalid"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("formGroup",ctx_r0.userInfoForm),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(23,30,"register-page.create-profile.identification.first-name")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("className",ctx_r0.firstName.invalid&&(ctx_r0.firstName.dirty||ctx_r0.firstName.touched)?"form-control is-invalid":"form-control"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",ctx_r0.firstName.invalid&&(ctx_r0.firstName.dirty||ctx_r0.firstName.touched)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(30,32,"register-page.create-profile.identification.last-name")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("className",ctx_r0.lastName.invalid&&(ctx_r0.lastName.dirty||ctx_r0.lastName.touched)?"form-control is-invalid":"form-control"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",ctx_r0.lastName.invalid&&(ctx_r0.lastName.dirty||ctx_r0.lastName.touched)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(37,34,"register-page.create-profile.identification.contact")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(43,36,"register-page.create-profile.identification.language")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("value",""),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngForOf",ctx_r0.activeLangs),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(50,38,"register-page.create-profile.security.header")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("passwordCanBeEmpty",!1)("FORM_PREFIX","register-page.create-profile.security."),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("disabled",ctx_r0.isInValidPassword||ctx_r0.userInfoForm.invalid),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(57,40,"register-page.create-profile.submit"))}}__name(CreateProfileComponent_div_0_div_25_span_1_Template,"CreateProfileComponent_div_0_div_25_span_1_Template"),__name(CreateProfileComponent_div_0_div_25_Template,"CreateProfileComponent_div_0_div_25_Template"),__name(CreateProfileComponent_div_0_div_32_span_1_Template,"CreateProfileComponent_div_0_div_32_span_1_Template"),__name(CreateProfileComponent_div_0_div_32_Template,"CreateProfileComponent_div_0_div_32_Template"),__name(CreateProfileComponent_div_0_option_46_Template,"CreateProfileComponent_div_0_option_46_Template"),__name(CreateProfileComponent_div_0_Template,"CreateProfileComponent_div_0_Template");class CreateProfileComponent{constructor(translateService,ePersonDataService,store,router,route,formBuilder,notificationsService,endUserAgreementService){this.translateService=translateService,this.ePersonDataService=ePersonDataService,this.store=store,this.router=router,this.route=route,this.formBuilder=formBuilder,this.notificationsService=notificationsService,this.endUserAgreementService=endUserAgreementService,this.isInValidPassword=!0,this.NOTIFICATIONS_PREFIX="register-page.create-profile.submit."}ngOnInit(){this.registration$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.UI)(data=>data.registration),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.Gp)()),this.registration$.subscribe(registration=>{this.email=registration.email,this.token=registration.token}),this.activeLangs=_environments_environment__WEBPACK_IMPORTED_MODULE_4__.N.languages.filter(MyLangConfig=>!0===MyLangConfig.active),this.userInfoForm=this.formBuilder.group({firstName:new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.p4("",{validators:[_angular_forms__WEBPACK_IMPORTED_MODULE_10__.kI.required]}),lastName:new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.p4("",{validators:[_angular_forms__WEBPACK_IMPORTED_MODULE_10__.kI.required]}),contactPhone:new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.p4(""),language:new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.p4("")})}setInValid($event){this.isInValidPassword=$event||(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.xb)(this.password)}setPasswordValue($event){this.password=$event,this.isInValidPassword=this.isInValidPassword||(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.xb)(this.password)}get firstName(){return this.userInfoForm.get("firstName")}get lastName(){return this.userInfoForm.get("lastName")}get contactPhone(){return this.userInfoForm.get("contactPhone")}get language(){return this.userInfoForm.get("language")}submitEperson(){if(!this.userInfoForm.invalid&&!this.isInValidPassword){const values={metadata:{"eperson.firstname":[{value:this.firstName.value}],"eperson.lastname":[{value:this.lastName.value}],"eperson.phone":[{value:this.contactPhone.value}],"eperson.language":[{value:this.language.value}]},email:this.email,password:this.password,canLogIn:!0,requireCertificate:!1};this.endUserAgreementService.isCookieAccepted()&&(values.metadata[_core_end_user_agreement_end_user_agreement_service__WEBPACK_IMPORTED_MODULE_5__.DJ]=[{value:String(!0)}],this.endUserAgreementService.removeCookieAccepted());const eperson=Object.assign(new _core_eperson_models_eperson_model__WEBPACK_IMPORTED_MODULE_1__.T,values);this.ePersonDataService.createEPersonForToken(eperson,this.token).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.hC)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.NOTIFICATIONS_PREFIX+"success.head"),this.translateService.get(this.NOTIFICATIONS_PREFIX+"success.content")),this.store.dispatch(new _core_auth_auth_actions__WEBPACK_IMPORTED_MODULE_2__.zn(this.email,this.password)),this.router.navigate(["/home"])):this.notificationsService.error(this.translateService.get(this.NOTIFICATIONS_PREFIX+"error.head"),rd.errorMessage)})}}}__name(CreateProfileComponent,"CreateProfileComponent"),CreateProfileComponent.\u0275fac=__name(function(t){return new(t||CreateProfileComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.sK),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__.k),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_ngrx_store__WEBPACK_IMPORTED_MODULE_13__.yh),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_14__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_14__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_angular_forms__WEBPACK_IMPORTED_MODULE_10__.QS),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__.T),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_core_end_user_agreement_end_user_agreement_service__WEBPACK_IMPORTED_MODULE_5__.u4))},"CreateProfileComponent_Factory"),CreateProfileComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.Xpm({type:CreateProfileComponent,selectors:[["ds-create-profile"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"mb-4"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],["for","email",1,"font-weight-bold"],["id","email"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","formControlName","firstName",3,"className"],["class","invalid-feedback show-feedback",4,"ngIf"],["for","lastName"],["id","lastName","formControlName","lastName",3,"className"],["for","contactPhone"],["id","contactPhone","formControlName","contactPhone",1,"form-control"],["for","language"],["id","language","formControlName","language",1,"form-control"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"passwordCanBeEmpty","FORM_PREFIX","isInvalid","passwordValue"],[1,"btn","btn-default","btn-primary",3,"disabled","click"],[1,"invalid-feedback","show-feedback"],[4,"ngIf"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(0,CreateProfileComponent_div_0_Template,58,42,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(1,1,ctx.registration$))},"CreateProfileComponent_Template"),dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_15__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_15__.O5,_angular_forms__WEBPACK_IMPORTED_MODULE_10__._Y,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Kr,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.EJ,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.JL,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.sg,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.u,_profile_page_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_7__.V,_angular_common__WEBPACK_IMPORTED_MODULE_15__.Ov,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.X$]})}};